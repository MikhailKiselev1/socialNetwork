2022-10-03 11:47:54 [main] INFO  o.j.s.SocialNetworkApplication - Starting SocialNetworkApplication on DESKTOP-5144I2V with PID 2512 (C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend\target\classes started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 11:47:54 [main] INFO  o.j.s.SocialNetworkApplication - The following profiles are active: prod
2022-10-03 11:47:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 11:47:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 154ms. Found 0 JDBC repository interfaces.
2022-10-03 11:48:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2022-10-03 11:48:02 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8086"]
2022-10-03 11:48:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2022-10-03 11:48:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-10-03 11:48:03 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-10-03 11:48:03 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8648 ms
2022-10-03 11:48:10 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 11:48:11 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 11:48:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 11:48:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 11:48:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 11:48:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 11:48:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM public.databasechangeloglock WHERE ID=1
2022-10-03 11:48:19 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 11:48:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MD5SUM FROM public.databasechangelog WHERE MD5SUM IS NOT NULL LIMIT 1
2022-10-03 11:48:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangelog
2022-10-03 11:48:20 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from public.databasechangelog
2022-10-03 11:48:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM public.databasechangelog ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 11:48:20 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 11:48:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7b80ac30, org.springframework.security.web.context.SecurityContextPersistenceFilter@67c020c8, org.springframework.security.web.header.HeaderWriterFilter@4ac7927a, org.springframework.web.filter.CorsFilter@8d0253b, org.springframework.security.web.authentication.logout.LogoutFilter@16c3e494, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@2c60ce47, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e8ef60b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1464a177, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@f61f06e, org.springframework.security.web.session.SessionManagementFilter@381ed137, org.springframework.security.web.access.ExceptionTranslationFilter@105e8710, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5e2abb58]
2022-10-03 11:48:24 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 11:48:24 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 11:48:24 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8086"]
2022-10-03 11:48:24 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2022-10-03 11:48:24 [main] INFO  o.j.s.SocialNetworkApplication - Started SocialNetworkApplication in 33.924 seconds (JVM running for 37.902)
2022-10-03 11:49:31 [http-nio-8086-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-03 11:49:31 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-10-03 11:49:31 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 55 ms
2022-10-03 11:49:38 [http-nio-8086-exec-4] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=pks52@mail.ru, password=12345678)] 
2022-10-03 11:49:38 [http-nio-8086-exec-4] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], return: [ResponseRs(error=, timestamp=1664786978905, offset=null, perPage=null, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@40cc32a7, errorDescription=null)] 
2022-10-03 11:49:39 [http-nio-8086-exec-5] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJwa3M1MkBtYWlsLnJ1IiwiaWF0IjoxNjY0Nzg2OTc4LCJleHAiOjE2NjQ3OTA1Nzh9.6CUxBq4Ra4Yhh_E6eVypZkIZAcHqlY1TfeaHC56wSKo] 
2022-10-03 11:49:39 [http-nio-8086-exec-5] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664786979218, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@770adb8d, errorDescription=null)] 
2022-10-03 11:49:53 [http-nio-8086-exec-6] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Михаил, lastName=Киселев, birthDate=2000-01-01T00:00:00+03:00, phone=, photoId=null, about=null, city=null, country=null, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJwa3M1MkBtYWlsLnJ1IiwiaWF0IjoxNjY0Nzg2OTc4LCJleHAiOjE2NjQ3OTA1Nzh9.6CUxBq4Ra4Yhh_E6eVypZkIZAcHqlY1TfeaHC56wSKo] 
2022-10-03 11:49:55 [http-nio-8086-exec-6] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 11:50:03 [http-nio-8086-exec-8] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJwa3M1MkBtYWlsLnJ1IiwiaWF0IjoxNjY0Nzg2OTc4LCJleHAiOjE2NjQ3OTA1Nzh9.6CUxBq4Ra4Yhh_E6eVypZkIZAcHqlY1TfeaHC56wSKo] 
2022-10-03 11:50:03 [http-nio-8086-exec-8] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664787003811, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@c941ccc, errorDescription=null)] 
2022-10-03 11:55:19 [http-nio-8086-exec-1] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [logout], arguments: [] 
2022-10-03 11:55:19 [http-nio-8086-exec-1] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [logout], return: [ResponseRs(error=, timestamp=1664787319007, offset=null, perPage=null, data={message=ok}, errorDescription=null)] 
2022-10-03 11:55:22 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 11:55:22 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 11:55:22 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 11:55:22 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 11:55:34 [main] INFO  o.j.s.SocialNetworkApplication - Starting SocialNetworkApplication on DESKTOP-5144I2V with PID 1108 (C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend\target\classes started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 11:55:34 [main] INFO  o.j.s.SocialNetworkApplication - The following profiles are active: prod
2022-10-03 11:55:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 11:55:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70ms. Found 0 JDBC repository interfaces.
2022-10-03 11:55:38 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2022-10-03 11:55:38 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8086"]
2022-10-03 11:55:38 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2022-10-03 11:55:38 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-10-03 11:55:38 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-10-03 11:55:38 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4713 ms
2022-10-03 11:55:40 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 11:55:41 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 11:55:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 11:55:42 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 11:55:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 11:55:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 11:55:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM public.databasechangeloglock WHERE ID=1
2022-10-03 11:55:44 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 11:55:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MD5SUM FROM public.databasechangelog WHERE MD5SUM IS NOT NULL LIMIT 1
2022-10-03 11:55:46 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangelog
2022-10-03 11:55:46 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from public.databasechangelog
2022-10-03 11:55:46 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM public.databasechangelog ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 11:55:46 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 11:55:46 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@747216b6, org.springframework.security.web.context.SecurityContextPersistenceFilter@7a7d25ca, org.springframework.security.web.header.HeaderWriterFilter@4b682e71, org.springframework.web.filter.CorsFilter@7ee6d5fd, org.springframework.security.web.authentication.logout.LogoutFilter@b61aa50, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3b170235, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@60003305, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@236e6563, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@358bbbe2, org.springframework.security.web.session.SessionManagementFilter@6992a147, org.springframework.security.web.access.ExceptionTranslationFilter@64cbc28e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@52dfd7f5]
2022-10-03 11:55:47 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 11:55:47 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 11:55:47 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8086"]
2022-10-03 11:55:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2022-10-03 11:55:47 [main] INFO  o.j.s.SocialNetworkApplication - Started SocialNetworkApplication in 15.254 seconds (JVM running for 16.42)
2022-10-03 11:56:01 [http-nio-8086-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-03 11:56:01 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-10-03 11:56:01 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 30 ms
2022-10-03 11:56:01 [http-nio-8086-exec-1] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=pks52@mail.ru, password=12345678)] 
2022-10-03 11:56:05 [http-nio-8086-exec-1] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], return: [ResponseRs(error=, timestamp=1664787365190, offset=null, perPage=null, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@1c175ccd, errorDescription=null)] 
2022-10-03 11:56:05 [http-nio-8086-exec-2] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJwa3M1MkBtYWlsLnJ1IiwiaWF0IjoxNjY0Nzg3MzYyLCJleHAiOjE2NjQ3OTA5NjJ9.blSe8PCLdxewt1i41luCPDIVYKIl-uqymQDSXlT8B6w] 
2022-10-03 11:56:06 [http-nio-8086-exec-2] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664787366267, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@249a3a33, errorDescription=null)] 
2022-10-03 11:56:10 [http-nio-8086-exec-8] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], arguments: [108, 0, 20] 
2022-10-03 11:56:10 [http-nio-8086-exec-8] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], return: [ListResponseRs(error=, timestamp=1664787370615, total=0, offset=0, perPage=20, data=[], errorDescription=null)] 
2022-10-03 11:56:47 [main] INFO  o.j.s.c.AccountControllerTest - Starting AccountControllerTest on DESKTOP-5144I2V with PID 3696 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 11:56:47 [main] INFO  o.j.s.c.AccountControllerTest - The following profiles are active: test
2022-10-03 11:56:50 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 11:56:50 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 77ms. Found 0 JDBC repository interfaces.
2022-10-03 11:56:54 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 11:56:55 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 11:56:55 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 11:56:56 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 11:56:58 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 11:56:58 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 11:56:58 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 11:56:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:56:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 385ms
2022-10-03 11:56:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 18ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 20ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 10ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 10ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 5ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 9ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 14ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 9ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 10ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 16ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 7ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 6ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 6ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 112ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 13ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 28ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 11:57:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787418182')
2022-10-03 11:57:00 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 11:57:01 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@605a10fd, org.springframework.security.web.context.SecurityContextPersistenceFilter@788cb7b0, org.springframework.security.web.header.HeaderWriterFilter@23c07745, org.springframework.web.filter.CorsFilter@16acf986, org.springframework.security.web.authentication.logout.LogoutFilter@10387d6d, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@29bd85db, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@68a06914, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@48b53f3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@35eb95d3, org.springframework.security.web.session.SessionManagementFilter@1ad28f2, org.springframework.security.web.access.ExceptionTranslationFilter@25b7ccfc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6dad684f]
2022-10-03 11:57:01 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 11:57:02 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 11:57:02 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 11:57:02 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 11:57:02 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 132 ms
2022-10-03 11:57:02 [main] INFO  o.j.s.c.AccountControllerTest - Started AccountControllerTest in 16.48 seconds (JVM running for 19.475)
2022-10-03 11:57:02 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@545b995e testClass = AccountControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.AccountControllerTest@42d039ef, testMethod = profileRegister@AccountControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@76a2ddf3 testClass = AccountControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@524f3b3a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@72cde7cc, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4e7912d8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1a4013, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7ea9e1e2, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7dcf94f8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4e44b713]; rollback [true]
2022-10-03 11:57:04 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@545b995e testClass = AccountControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.AccountControllerTest@42d039ef, testMethod = profileRegister@AccountControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@76a2ddf3 testClass = AccountControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@524f3b3a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@72cde7cc, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4e7912d8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1a4013, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7ea9e1e2, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7dcf94f8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 11:57:04 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 11:57:04 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 11:57:04 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 11:57:04 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 11:57:17 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 13876 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 11:57:17 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 11:57:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 11:57:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80ms. Found 0 JDBC repository interfaces.
2022-10-03 11:57:23 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 11:57:23 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 11:57:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 11:57:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 11:57:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:57:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 11:57:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:57:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:57:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 11:57:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 11:57:26 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 11:57:26 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 11:57:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 11:57:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 11:57:27 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 11:57:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 11:57:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:57:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 11:57:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 480ms
2022-10-03 11:57:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 19ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 15ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 9ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 10ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 14ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 7ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 6ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 3ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 118ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 28ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:57:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 12ms
2022-10-03 11:57:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787447014')
2022-10-03 11:57:29 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 11:57:30 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7194f5b, org.springframework.security.web.context.SecurityContextPersistenceFilter@48b53f3d, org.springframework.security.web.header.HeaderWriterFilter@7d91e9c9, org.springframework.web.filter.CorsFilter@1e0be005, org.springframework.security.web.authentication.logout.LogoutFilter@35f79e6d, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@a056b26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@57bd0b3c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@118932fe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fd226da, org.springframework.security.web.session.SessionManagementFilter@ebd4486, org.springframework.security.web.access.ExceptionTranslationFilter@9d10078, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70b9a553]
2022-10-03 11:57:30 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 11:57:31 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 11:57:31 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 11:57:31 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 11:57:31 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 108 ms
2022-10-03 11:57:31 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 15.166 seconds (JVM running for 18.201)
2022-10-03 11:57:31 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@73e4ecb, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5813046e]; rollback [true]
2022-10-03 11:57:32 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODc0NTIsImV4cCI6MTY2NDc5MTA1Mn0.mHsMsY4g8HSlx3rbdVr4QTdUD2bgtDqA_jkqEcCPikw] 
2022-10-03 11:57:34 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@73e4ecb, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 11:57:34 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@15329cf9, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5813046e]; rollback [true]
2022-10-03 11:57:34 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@15329cf9, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 11:57:34 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@13cdee45, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5813046e]; rollback [true]
2022-10-03 11:57:34 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Тест, lastName=Тестов, birthDate=1987-07-01T00:00:00+04:00, phone=8064581946, photoId=null, about=null, city=Москва, country=Россия, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODc0NTQsImV4cCI6MTY2NDc5MTA1NH0.MwLo7Q-jOScvKi-lI6IGdSJyhMjoVEL9jWD5G2f85Jo] 
2022-10-03 11:57:34 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 11:57:34 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@13cdee45, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 11:57:34 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 11:57:34 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 11:57:34 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 11:57:34 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 11:57:46 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 11:57:46 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 11:57:46 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 11:57:46 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 11:57:59 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 6172 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 11:57:59 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 11:58:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 11:58:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70ms. Found 0 JDBC repository interfaces.
2022-10-03 11:58:05 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 11:58:05 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 11:58:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 11:58:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 11:58:08 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 11:58:08 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 11:58:08 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 11:58:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 11:58:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 11:58:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 332ms
2022-10-03 11:58:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 11:58:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 15ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 12ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 8ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 12ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 5ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 61ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 20ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 21ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 11:58:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 24ms
2022-10-03 11:58:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4787488940')
2022-10-03 11:58:11 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 11:58:12 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7845f53d, org.springframework.security.web.context.SecurityContextPersistenceFilter@51a4472d, org.springframework.security.web.header.HeaderWriterFilter@414a3c7d, org.springframework.web.filter.CorsFilter@4a6c3720, org.springframework.security.web.authentication.logout.LogoutFilter@68a06914, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3a109ff7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@72e36d0f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13eb8ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a8e93db, org.springframework.security.web.session.SessionManagementFilter@25ea3a5f, org.springframework.security.web.access.ExceptionTranslationFilter@794fbf0d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4f573b84]
2022-10-03 11:58:12 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 11:58:12 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 11:58:12 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 11:58:12 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 11:58:12 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 95 ms
2022-10-03 11:58:12 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.375 seconds (JVM running for 17.159)
2022-10-03 11:58:12 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@7a1a14a4 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@d0993f0, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@265adfad testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@a3d9978 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@770d3326, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@19d481b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@11bd0f3b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1b6e1eff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@206a70ef], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@73193fe0]; rollback [true]
2022-10-03 11:58:13 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODc0OTMsImV4cCI6MTY2NDc5MTA5M30.6dWlVCgynngSJAFKUEFkbxur14vh55M9f0cf1IXM_N8] 
2022-10-03 11:58:15 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@7a1a14a4 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@d0993f0, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@265adfad testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@a3d9978 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@770d3326, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@19d481b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@11bd0f3b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1b6e1eff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@206a70ef], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 11:58:15 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@7a1a14a4 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@131c4ffe, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@265adfad testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@a3d9978 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@770d3326, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@19d481b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@11bd0f3b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1b6e1eff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@206a70ef], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@73193fe0]; rollback [true]
2022-10-03 11:58:15 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@7a1a14a4 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@131c4ffe, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@265adfad testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@a3d9978 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@770d3326, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@19d481b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@11bd0f3b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1b6e1eff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@206a70ef], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 11:58:15 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@7a1a14a4 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@6314b195, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@265adfad testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@a3d9978 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@770d3326, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@19d481b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@11bd0f3b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1b6e1eff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@206a70ef], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@73193fe0]; rollback [true]
2022-10-03 11:58:15 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Тест, lastName=Тестов, birthDate=1987-07-01T00:00:00+04:00, phone=8064581946, photoId=null, about=null, city=Москва, country=Россия, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODc0OTUsImV4cCI6MTY2NDc5MTA5NX0.23GoIB2EQNgy9zAsovL8s9Wi3wzI1OPu1VBgw1ASId4] 
2022-10-03 11:58:15 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 11:58:16 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@7a1a14a4 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@6314b195, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@265adfad testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@a3d9978 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@770d3326, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@19d481b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@11bd0f3b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1b6e1eff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@206a70ef], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 11:58:16 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 11:58:16 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 11:58:16 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 11:58:16 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:16:03 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 4196 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:16:03 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:16:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:16:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70ms. Found 0 JDBC repository interfaces.
2022-10-03 12:16:09 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:16:09 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:16:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:16:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:16:12 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:16:12 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:16:12 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:16:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:16:13 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:16:13 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:13 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 397ms
2022-10-03 12:16:13 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 18ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 25ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 20ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 42ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 24ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 20ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 23ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 29ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 40ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 153ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:16:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 30ms
2022-10-03 12:16:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788572827')
2022-10-03 12:16:15 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:16:17 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7194f5b, org.springframework.security.web.context.SecurityContextPersistenceFilter@48b53f3d, org.springframework.security.web.header.HeaderWriterFilter@7d91e9c9, org.springframework.web.filter.CorsFilter@1e0be005, org.springframework.security.web.authentication.logout.LogoutFilter@35f79e6d, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@370c7cc5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@57bd0b3c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@118932fe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fd226da, org.springframework.security.web.session.SessionManagementFilter@ebd4486, org.springframework.security.web.access.ExceptionTranslationFilter@9d10078, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70b9a553]
2022-10-03 12:16:18 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:16:18 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:16:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:16:18 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:16:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 116 ms
2022-10-03 12:16:18 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 16.297 seconds (JVM running for 19.245)
2022-10-03 12:16:18 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@780ccdc9, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5813046e]; rollback [true]
2022-10-03 12:16:19 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODg1NzksImV4cCI6MTY2NDc5MjE3OX0.lvsSHkIu926yEiCaPGlxvRWAYo0rD85So-lqVqTd4Vg] 
2022-10-03 12:16:21 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@780ccdc9, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:16:21 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:16:21 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:16:21 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:16:21 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:17:09 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 1540 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:17:09 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:17:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:17:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76ms. Found 0 JDBC repository interfaces.
2022-10-03 12:17:14 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:17:15 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:17:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:17:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:17:18 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:17:18 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:17:18 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:17:18 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:18 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 435ms
2022-10-03 12:17:18 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 26ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 45ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 50ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 33ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:17:20 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:17:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788638260')
2022-10-03 12:17:20 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:17:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5f709b99, org.springframework.security.web.context.SecurityContextPersistenceFilter@f758e05, org.springframework.security.web.header.HeaderWriterFilter@18a8a40e, org.springframework.web.filter.CorsFilter@46ebfc09, org.springframework.security.web.authentication.logout.LogoutFilter@296c0293, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@370c7cc5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@38de4f1d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5eace68f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21f41593, org.springframework.security.web.session.SessionManagementFilter@68a06914, org.springframework.security.web.access.ExceptionTranslationFilter@704205ef, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@42018e32]
2022-10-03 12:17:21 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:17:22 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:17:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:17:22 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:17:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 90 ms
2022-10-03 12:17:22 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.447 seconds (JVM running for 17.229)
2022-10-03 12:17:22 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@337f6716, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6225c800]; rollback [true]
2022-10-03 12:17:23 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODg2NDMsImV4cCI6MTY2NDc5MjI0M30.ygM84NB-XWNl-7tOsAQfI4xamaEuLpP3bV-pvQAlTLE] 
2022-10-03 12:17:25 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@337f6716, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:17:25 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:17:25 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:17:25 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:17:25 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:18:26 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 880 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:18:26 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:18:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:18:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103ms. Found 0 JDBC repository interfaces.
2022-10-03 12:18:32 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:18:32 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:18:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:18:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:18:35 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:18:35 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:18:35 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:18:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:18:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:18:36 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:36 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 306ms
2022-10-03 12:18:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 52ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 65ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 98ms
2022-10-03 12:18:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 31ms
2022-10-03 12:18:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 27ms
2022-10-03 12:18:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:18:38 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 40ms
2022-10-03 12:18:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788715740')
2022-10-03 12:18:38 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:18:39 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f2d681a, org.springframework.security.web.context.SecurityContextPersistenceFilter@24e63b9f, org.springframework.security.web.header.HeaderWriterFilter@426fb1c3, org.springframework.web.filter.CorsFilter@50588ef6, org.springframework.security.web.authentication.logout.LogoutFilter@ad7cc49, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@7bf018dd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74a29300, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@32b273c1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10744fff, org.springframework.security.web.session.SessionManagementFilter@3552eb5b, org.springframework.security.web.access.ExceptionTranslationFilter@2044a11b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@55aadbf2]
2022-10-03 12:18:39 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:18:40 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:18:40 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 109 ms
2022-10-03 12:18:40 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 15.327 seconds (JVM running for 17.978)
2022-10-03 12:18:40 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@49964d75 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@6415112c, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@528c868 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@466276d8 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2dde1bff, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5f9b2141, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3fb1549b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@505fc5a4, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@367ffa75], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@11c95035]; rollback [true]
2022-10-03 12:18:41 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODg3MjEsImV4cCI6MTY2NDc5MjMyMX0.GFgnvTRsXC9Ml0EwUDd2aQZuauoIz8bRYkvOd1bS_CU] 
2022-10-03 12:18:41 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664788721494, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@5e077a32, errorDescription=null)] 
2022-10-03 12:18:41 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@49964d75 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@6415112c, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@528c868 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@466276d8 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2dde1bff, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5f9b2141, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3fb1549b, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@505fc5a4, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@367ffa75], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:18:41 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:18:41 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:18:41 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:18:41 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:20:58 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 13904 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:20:58 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:21:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:21:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74ms. Found 0 JDBC repository interfaces.
2022-10-03 12:21:04 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:21:05 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:21:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:21:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:21:08 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:21:08 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:21:08 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:21:08 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:08 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 530ms
2022-10-03 12:21:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 74ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 18ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:21:10 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:21:10 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4788868365')
2022-10-03 12:21:11 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:21:11 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5f709b99, org.springframework.security.web.context.SecurityContextPersistenceFilter@f758e05, org.springframework.security.web.header.HeaderWriterFilter@18a8a40e, org.springframework.web.filter.CorsFilter@46ebfc09, org.springframework.security.web.authentication.logout.LogoutFilter@296c0293, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@370c7cc5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@38de4f1d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5eace68f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21f41593, org.springframework.security.web.session.SessionManagementFilter@68a06914, org.springframework.security.web.access.ExceptionTranslationFilter@704205ef, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@42018e32]
2022-10-03 12:21:12 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:21:12 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:21:12 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:21:12 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:21:12 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 106 ms
2022-10-03 12:21:12 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 15.088 seconds (JVM running for 18.059)
2022-10-03 12:21:12 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@337f6716, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6225c800]; rollback [true]
2022-10-03 12:21:13 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODg4NzMsImV4cCI6MTY2NDc5MjQ3M30.BNDE9bZmaJmQJG4JjLF5KP7w6RpVsYIvMqJBq6rIrMY] 
2022-10-03 12:21:15 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@337f6716, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:21:15 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:21:15 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:21:15 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:21:15 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:24:58 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 1284 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:24:58 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:25:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:25:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 94ms. Found 0 JDBC repository interfaces.
2022-10-03 12:25:03 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:25:04 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:25:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:25:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:25:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:25:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:25:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:25:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:25:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:25:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:25:07 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:25:07 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:25:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:25:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:25:07 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:25:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:25:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:25:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:25:07 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:07 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 370ms
2022-10-03 12:25:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 25ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 0ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 20ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 53ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 23ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:25:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:25:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789107217')
2022-10-03 12:25:09 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:25:10 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@68950f25, org.springframework.security.web.context.SecurityContextPersistenceFilter@57bd0b3c, org.springframework.security.web.header.HeaderWriterFilter@3e711e84, org.springframework.web.filter.CorsFilter@e471cef, org.springframework.security.web.authentication.logout.LogoutFilter@eb7d4ba, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@5ebbde60, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52a9c251, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7887e1f3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7f2d681a, org.springframework.security.web.session.SessionManagementFilter@6b1381fc, org.springframework.security.web.access.ExceptionTranslationFilter@50061d56, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d685156]
2022-10-03 12:25:10 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:25:10 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:25:10 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:25:10 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:25:11 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 83 ms
2022-10-03 12:25:11 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.506 seconds (JVM running for 17.327)
2022-10-03 12:25:11 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@4485ca30, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@17cf5dcc]; rollback [true]
2022-10-03 12:25:12 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Тест, lastName=Тестов, birthDate=1987-07-01T00:00:00+04:00, phone=8064581946, photoId=null, about=null, city=Москва, country=Россия, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODkxMTEsImV4cCI6MTY2NDc5MjcxMX0.iDTS0DWuA5yCbGiH_nneeG3C5hdKkjMVknzAhuMRyvg] 
2022-10-03 12:25:12 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 12:25:12 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@4485ca30, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:25:12 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:25:12 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:25:12 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:25:12 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:30:15 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 7184 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:30:15 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:30:17 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:30:17 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75ms. Found 0 JDBC repository interfaces.
2022-10-03 12:30:21 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:30:21 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:30:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:30:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:30:24 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:30:24 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:30:24 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:30:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:30:25 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:30:25 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:25 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 398ms
2022-10-03 12:30:25 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:30:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 41ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 59ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 21ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:30:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 32ms
2022-10-03 12:30:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789424974')
2022-10-03 12:30:27 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:30:27 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@268215b3, org.springframework.security.web.context.SecurityContextPersistenceFilter@74a29300, org.springframework.security.web.header.HeaderWriterFilter@653e79fc, org.springframework.web.filter.CorsFilter@4e31229f, org.springframework.security.web.authentication.logout.LogoutFilter@ae5eeee, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3cc3f13e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@aad7ade, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e7f312, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6a4940e1, org.springframework.security.web.session.SessionManagementFilter@10164e94, org.springframework.security.web.access.ExceptionTranslationFilter@788cb7b0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@10ecdd85]
2022-10-03 12:30:28 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:30:28 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:30:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:30:28 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:30:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 159 ms
2022-10-03 12:30:28 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.591 seconds (JVM running for 17.358)
2022-10-03 12:30:28 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@416dd4d8, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3e8cf854]; rollback [true]
2022-10-03 12:30:29 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODk0MjksImV4cCI6MTY2NDc5MzAyOX0.mBANfyLuzgSR63v7c9Afs0Z4RGfj93-oGw4q_bFc2cY] 
2022-10-03 12:30:31 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@416dd4d8, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:30:31 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:30:31 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:30:31 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:30:31 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:31:12 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 10956 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:31:12 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:31:14 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:31:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 109ms. Found 0 JDBC repository interfaces.
2022-10-03 12:31:18 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:31:19 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:31:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:31:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:31:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:31:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:31:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:31:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:31:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:31:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:31:21 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:31:22 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:31:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:31:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:31:22 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:31:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:31:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:31:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:31:22 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:22 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 350ms
2022-10-03 12:31:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 29ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 57ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 18ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:31:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:31:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789482076')
2022-10-03 12:31:24 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:31:25 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49a6503f, org.springframework.security.web.context.SecurityContextPersistenceFilter@aad7ade, org.springframework.security.web.header.HeaderWriterFilter@43c73b5c, org.springframework.web.filter.CorsFilter@1be49e00, org.springframework.security.web.authentication.logout.LogoutFilter@5c452eb5, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@44faa4f2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3392d69b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@511cc6fc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@19e93a38, org.springframework.security.web.session.SessionManagementFilter@5eace68f, org.springframework.security.web.access.ExceptionTranslationFilter@68a06914, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3c320c8b]
2022-10-03 12:31:25 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:31:25 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:31:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:31:25 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:31:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 110 ms
2022-10-03 12:31:26 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.493 seconds (JVM running for 17.115)
2022-10-03 12:31:26 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@54c3bae, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@10e7ade5]; rollback [true]
2022-10-03 12:31:26 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODk0ODYsImV4cCI6MTY2NDc5MzA4Nn0.XhFYrVp5oUC7VjO40WQQpnf_ingrfIWfFynyoC5HSoY] 
2022-10-03 12:31:28 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@54c3bae, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:31:28 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:31:29 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:31:29 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:31:29 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:32:39 [main] INFO  o.j.s.service.LoginServiceTest - Starting LoginServiceTest on DESKTOP-5144I2V with PID 8492 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:32:39 [main] INFO  o.j.s.service.LoginServiceTest - The following profiles are active: test
2022-10-03 12:32:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:32:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73ms. Found 0 JDBC repository interfaces.
2022-10-03 12:32:44 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:32:45 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:32:46 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:32:46 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:32:48 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:32:48 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:32:48 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:32:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 420ms
2022-10-03 12:32:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 1ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 40ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 27ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:32:50 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:32:50 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789568422')
2022-10-03 12:32:50 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:32:51 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@426fb1c3, org.springframework.security.web.context.SecurityContextPersistenceFilter@3ed7fc6f, org.springframework.security.web.header.HeaderWriterFilter@1af6cd73, org.springframework.web.filter.CorsFilter@5fc3bf09, org.springframework.security.web.authentication.logout.LogoutFilter@39aa595, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@2f15a964, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@62e7e3df, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@666033b1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@69f01f4b, org.springframework.security.web.session.SessionManagementFilter@72cb5d7d, org.springframework.security.web.access.ExceptionTranslationFilter@6fe47be, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@25b7ccfc]
2022-10-03 12:32:51 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:32:52 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:32:52 [main] INFO  o.j.s.service.LoginServiceTest - Started LoginServiceTest in 14.238 seconds (JVM running for 16.504)
2022-10-03 12:32:53 [main] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder - Encoded password does not look like BCrypt
2022-10-03 12:32:54 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:32:54 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:32:54 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:32:54 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:34:26 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 12916 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:34:26 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:34:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:34:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 88ms. Found 0 JDBC repository interfaces.
2022-10-03 12:34:32 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:34:32 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:34:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:34:34 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:34:36 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:34:36 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:34:36 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:34:36 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:36 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 341ms
2022-10-03 12:34:36 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 93ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 36ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 24ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 160ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 28ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 41ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 18ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 18ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 40ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 37ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:34:39 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:34:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789676267')
2022-10-03 12:34:39 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:34:41 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@268215b3, org.springframework.security.web.context.SecurityContextPersistenceFilter@74a29300, org.springframework.security.web.header.HeaderWriterFilter@653e79fc, org.springframework.web.filter.CorsFilter@4e31229f, org.springframework.security.web.authentication.logout.LogoutFilter@ae5eeee, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3cc3f13e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@aad7ade, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e7f312, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6a4940e1, org.springframework.security.web.session.SessionManagementFilter@10164e94, org.springframework.security.web.access.ExceptionTranslationFilter@788cb7b0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@10ecdd85]
2022-10-03 12:34:41 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:34:41 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:34:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:34:41 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:34:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 93 ms
2022-10-03 12:34:41 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 16.732 seconds (JVM running for 20.245)
2022-10-03 12:34:42 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@5fc4af25, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3e8cf854]; rollback [true]
2022-10-03 12:34:42 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODk2ODIsImV4cCI6MTY2NDc5MzI4Mn0.A67ekJCLscOd3FqR1V4Ox6vkOKZL2mnVxlozm_1lhQE] 
2022-10-03 12:34:44 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@5fc4af25, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:34:44 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:34:44 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:34:44 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:34:44 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:34:54 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 13628 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:34:54 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:34:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:34:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 88ms. Found 0 JDBC repository interfaces.
2022-10-03 12:35:00 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:35:00 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:35:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:35:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:35:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:35:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:35:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:35:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:35:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:35:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:35:03 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:35:04 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:35:04 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:35:04 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:35:04 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:35:04 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:35:04 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:35:04 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:35:04 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:04 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 340ms
2022-10-03 12:35:04 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 31ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 42ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 112ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:35:06 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 45ms
2022-10-03 12:35:06 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789704040')
2022-10-03 12:35:06 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:35:07 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2662997a, org.springframework.security.web.context.SecurityContextPersistenceFilter@2c70da80, org.springframework.security.web.header.HeaderWriterFilter@577e2b91, org.springframework.web.filter.CorsFilter@329b4814, org.springframework.security.web.authentication.logout.LogoutFilter@7da3d617, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@5ebbde60, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@118932fe, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@420307f9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@26204f8f, org.springframework.security.web.session.SessionManagementFilter@5973d3ec, org.springframework.security.web.access.ExceptionTranslationFilter@759fe679, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@67dc8aa8]
2022-10-03 12:35:07 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:35:07 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:35:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:35:07 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:35:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 103 ms
2022-10-03 12:35:07 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 15.395 seconds (JVM running for 18.028)
2022-10-03 12:35:08 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@5cfcb55c, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4cdd0f2f]; rollback [true]
2022-10-03 12:35:09 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODk3MDgsImV4cCI6MTY2NDc5MzMwOH0.P_RDHbJR9A2hVG_LDigncBURM6428x-NVkVCzzZgxJI] 
2022-10-03 12:35:11 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@5cfcb55c, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:35:11 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@7da43bda, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4cdd0f2f]; rollback [true]
2022-10-03 12:35:11 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@7da43bda, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:35:11 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@47ce059f, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4cdd0f2f]; rollback [true]
2022-10-03 12:35:11 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Тест, lastName=Тестов, birthDate=1987-07-01T00:00:00+04:00, phone=8064581946, photoId=null, about=null, city=Москва, country=Россия, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODk3MTEsImV4cCI6MTY2NDc5MzMxMX0.ftNEwA9lhR8fUybLZVsSQE6xNfhXQ45lmiXBiOnG4J4] 
2022-10-03 12:35:11 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 12:35:11 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@e70f13a testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@47ce059f, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3d3e5463 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@64a40280 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e096385, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@34f5090e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69997e9d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6d4e5011, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@198b6731], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:35:11 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:35:11 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:35:11 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:35:11 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:36:26 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 13968 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:36:26 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:36:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:36:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 77ms. Found 0 JDBC repository interfaces.
2022-10-03 12:36:32 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:36:32 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:36:32 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:36:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:36:35 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:36:35 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:36:35 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:36:35 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:35 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 322ms
2022-10-03 12:36:35 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 18ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 54ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 22ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:36:37 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 30ms
2022-10-03 12:36:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789795564')
2022-10-03 12:36:37 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:36:38 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@543669de, org.springframework.security.web.context.SecurityContextPersistenceFilter@7d6f094e, org.springframework.security.web.header.HeaderWriterFilter@5b115d71, org.springframework.web.filter.CorsFilter@3808bdfc, org.springframework.security.web.authentication.logout.LogoutFilter@6ae247b7, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@7ab63838, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3552eb5b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@39df2652, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5f709b99, org.springframework.security.web.session.SessionManagementFilter@69f01f4b, org.springframework.security.web.access.ExceptionTranslationFilter@31b9108b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@518e9141]
2022-10-03 12:36:38 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:36:39 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:36:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:36:39 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:36:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 106 ms
2022-10-03 12:36:39 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.366 seconds (JVM running for 17.272)
2022-10-03 12:36:39 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@57404a8d, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@252da8f]; rollback [true]
2022-10-03 12:36:40 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<org.javaproteam27.socialnetwork.model.dto.response.UserRs> org.javaproteam27.socialnetwork.controller.UserController.editUser(org.javaproteam27.socialnetwork.model.dto.request.UserRq,java.lang.String)]
2022-10-03 12:36:40 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@57404a8d, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:36:40 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:36:40 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:36:40 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:36:40 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:37:20 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 9428 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:37:20 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:37:22 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:37:22 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70ms. Found 0 JDBC repository interfaces.
2022-10-03 12:37:26 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:37:26 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:37:27 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:37:27 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:37:29 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:37:29 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:37:29 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:37:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:37:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 362ms
2022-10-03 12:37:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 21ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 37ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 63ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 59ms
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 121ms
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:37:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:37:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789849624')
2022-10-03 12:37:32 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:37:32 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@72ab75c, org.springframework.security.web.context.SecurityContextPersistenceFilter@7153995c, org.springframework.security.web.header.HeaderWriterFilter@6b886e86, org.springframework.web.filter.CorsFilter@40c858fc, org.springframework.security.web.authentication.logout.LogoutFilter@37846cc2, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3cc3f13e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@199d1fb7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@127c5f20, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@60a6564c, org.springframework.security.web.session.SessionManagementFilter@2c70da80, org.springframework.security.web.access.ExceptionTranslationFilter@5fc3bf09, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@16acf986]
2022-10-03 12:37:33 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:37:33 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:37:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:37:33 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:37:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 80 ms
2022-10-03 12:37:33 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.62 seconds (JVM running for 17.307)
2022-10-03 12:37:33 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@4fddd42b, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@67f25c]; rollback [true]
2022-10-03 12:37:34 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<org.javaproteam27.socialnetwork.model.dto.response.UserRs> org.javaproteam27.socialnetwork.controller.UserController.editUser(org.javaproteam27.socialnetwork.model.dto.request.UserRq,java.lang.String)]
2022-10-03 12:37:34 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@4fddd42b, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:37:34 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:37:34 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:37:34 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:37:34 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:38:01 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 7700 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:38:01 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:38:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:38:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 116ms. Found 0 JDBC repository interfaces.
2022-10-03 12:38:08 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:38:08 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:38:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:38:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:38:12 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:38:12 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:38:12 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:38:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:38:13 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:38:13 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:13 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 376ms
2022-10-03 12:38:13 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 26ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 48ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 22ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 32ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 23ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 1ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 40ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 22ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:38:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:38:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4789892722')
2022-10-03 12:38:15 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:38:16 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@31330344, org.springframework.security.web.context.SecurityContextPersistenceFilter@118932fe, org.springframework.security.web.header.HeaderWriterFilter@7d6f094e, org.springframework.web.filter.CorsFilter@72ab75c, org.springframework.security.web.authentication.logout.LogoutFilter@123372f4, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@69b3886f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7887e1f3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2c3d46d6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40c858fc, org.springframework.security.web.session.SessionManagementFilter@e30573c, org.springframework.security.web.access.ExceptionTranslationFilter@426fb1c3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@605a10fd]
2022-10-03 12:38:17 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:38:17 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:38:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:38:17 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:38:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 185 ms
2022-10-03 12:38:17 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 17.708 seconds (JVM running for 20.982)
2022-10-03 12:38:17 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@53f6fd09 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@359ae83a, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6bffbc6d testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@1b84f475 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@20f5239f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@932bc4a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6f46426d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@5562c41e, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3a52dba3], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@59f0ef6e]; rollback [true]
2022-10-03 12:38:19 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3ODk4OTgsImV4cCI6MTY2NDc5MzQ5OH0.8xP-Ddq_RvIGhAyaJFpnNs5JR99WXNyyyQ2n2TYJuaw] 
2022-10-03 12:38:21 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@53f6fd09 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@359ae83a, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: String 'path' does not match pattern, mergedContextConfiguration = [WebMergedContextConfiguration@6bffbc6d testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@1b84f475 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@20f5239f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@932bc4a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6f46426d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@5562c41e, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3a52dba3], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:38:21 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:38:21 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:38:21 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:38:21 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:55:06 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 10620 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:55:06 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:55:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:55:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 94ms. Found 0 JDBC repository interfaces.
2022-10-03 12:55:13 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:55:14 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:55:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:55:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:55:16 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:55:16 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:55:17 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:55:17 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:55:17 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:55:17 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:17 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 322ms
2022-10-03 12:55:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 33ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 13ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 57ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:55:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:55:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4790917157')
2022-10-03 12:55:19 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:55:20 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ceeab0c, org.springframework.security.web.context.SecurityContextPersistenceFilter@6b1381fc, org.springframework.security.web.header.HeaderWriterFilter@2044a11b, org.springframework.web.filter.CorsFilter@7194f5b, org.springframework.security.web.authentication.logout.LogoutFilter@7c4663ec, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@5ebbde60, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1dd1093c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@282831ea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1e0be005, org.springframework.security.web.session.SessionManagementFilter@653e79fc, org.springframework.security.web.access.ExceptionTranslationFilter@69dc0dd1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3e07ccbf]
2022-10-03 12:55:20 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:55:20 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:55:20 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:55:20 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:55:20 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 114 ms
2022-10-03 12:55:21 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 16.029 seconds (JVM running for 18.944)
2022-10-03 12:55:21 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@2d4df467, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@143abb21]; rollback [true]
2022-10-03 12:55:22 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTA5MjEsImV4cCI6MTY2NDc5NDUyMX0.k441YBANHF8tqjofR-zXhcgAH1Hdme0WqG-nzueeXds] 
2022-10-03 12:55:24 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@ab7395e testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@2d4df467, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: Required value for 'path' is null, mergedContextConfiguration = [WebMergedContextConfiguration@50d13246 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2bd08376 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@a2431d0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1b6e1eff, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33990a0c, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@78123e82, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4d1c00d0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:55:24 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:55:24 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:55:24 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:55:24 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:57:35 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 2864 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:57:35 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:57:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:57:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74ms. Found 0 JDBC repository interfaces.
2022-10-03 12:57:41 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:57:41 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:57:42 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:57:42 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:57:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:57:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:57:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:57:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:57:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:57:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:57:44 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:57:45 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:57:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:57:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:57:45 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:57:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:57:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:57:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:57:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 373ms
2022-10-03 12:57:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:57:46 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 21ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 28ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 64ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 24ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:57:47 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:57:47 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791065040')
2022-10-03 12:57:47 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:57:47 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@26204f8f, org.springframework.security.web.context.SecurityContextPersistenceFilter@52a9c251, org.springframework.security.web.header.HeaderWriterFilter@2a59a8fe, org.springframework.web.filter.CorsFilter@1419f703, org.springframework.security.web.authentication.logout.LogoutFilter@3566d527, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@424f02b8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b256d50, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7e822c11, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@268215b3, org.springframework.security.web.session.SessionManagementFilter@1dd1093c, org.springframework.security.web.access.ExceptionTranslationFilter@2fbbdca, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5de769c8]
2022-10-03 12:57:48 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:57:48 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:57:48 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:57:48 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:57:48 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 166 ms
2022-10-03 12:57:48 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.653 seconds (JVM running for 17.355)
2022-10-03 12:57:49 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@2dca3c72, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3e8cf854]; rollback [true]
2022-10-03 12:57:49 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTEwNjksImV4cCI6MTY2NDc5NDY2OX0.t6ecbwkcg-SNOaCkMVzLGjoAwUmytcADgQfgTw7uiQU] 
2022-10-03 12:57:53 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664791073610, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@30e2c9dc, errorDescription=null)] 
2022-10-03 12:57:53 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@38aa816f testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@2dca3c72, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53f6fd09 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6bffbc6d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@193f604a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bedbc4d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3d5c822d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@53fdffa1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@24aed80c], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:57:53 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:57:53 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:57:53 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:57:53 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:58:09 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 5784 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:58:09 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 12:58:12 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:58:12 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 180ms. Found 0 JDBC repository interfaces.
2022-10-03 12:58:17 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:58:18 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:58:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:58:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:58:22 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:58:22 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:58:22 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:58:22 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:22 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 400ms
2022-10-03 12:58:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 56ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 29ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:58:24 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:58:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791102467')
2022-10-03 12:58:24 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:58:25 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1be49e00, org.springframework.security.web.context.SecurityContextPersistenceFilter@67599bae, org.springframework.security.web.header.HeaderWriterFilter@6b1381fc, org.springframework.web.filter.CorsFilter@19e93a38, org.springframework.security.web.authentication.logout.LogoutFilter@4833bb83, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@2a5abd3c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@420307f9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@216906a0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4baf0b7f, org.springframework.security.web.session.SessionManagementFilter@74a29300, org.springframework.security.web.access.ExceptionTranslationFilter@2a59a8fe, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4d23b242]
2022-10-03 12:58:26 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:58:26 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:58:26 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:58:26 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:58:26 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 104 ms
2022-10-03 12:58:26 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 18.757 seconds (JVM running for 22.276)
2022-10-03 12:58:26 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64a40280 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@54c3bae, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b40f651 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@42b02722 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@693fe6c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a2431d0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2df9b86, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@76c3e77a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c9754d8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@2fad48b7]; rollback [true]
2022-10-03 12:58:27 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTExMDcsImV4cCI6MTY2NDc5NDcwN30.2bzQb1vyg2v3zII-hp5tTkVWwdSKmdhEYKzuUaAYQwU] 
2022-10-03 12:58:30 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664791110394, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@1d0b4fe4, errorDescription=null)] 
2022-10-03 12:58:30 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64a40280 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@54c3bae, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b40f651 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@42b02722 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@693fe6c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a2431d0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2df9b86, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@76c3e77a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c9754d8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:58:30 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64a40280 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@388b4f68, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b40f651 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@42b02722 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@693fe6c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a2431d0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2df9b86, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@76c3e77a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c9754d8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@2fad48b7]; rollback [true]
2022-10-03 12:58:30 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64a40280 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@388b4f68, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b40f651 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@42b02722 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@693fe6c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a2431d0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2df9b86, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@76c3e77a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c9754d8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:58:30 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64a40280 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@3408c95b, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b40f651 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@42b02722 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@693fe6c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a2431d0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2df9b86, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@76c3e77a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c9754d8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@2fad48b7]; rollback [true]
2022-10-03 12:58:30 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Тест, lastName=Тестов, birthDate=1987-07-01T00:00:00+04:00, phone=8064581946, photoId=null, about=null, city=Москва, country=Россия, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTExMTAsImV4cCI6MTY2NDc5NDcxMH0.bfwRD9rgzeHu6dbotfopIYn96saIKodvyrlrtW-iZFs] 
2022-10-03 12:58:30 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 12:58:30 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64a40280 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@3408c95b, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b40f651 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@42b02722 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@693fe6c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a2431d0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2df9b86, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@76c3e77a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c9754d8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:58:30 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:58:30 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:58:30 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:58:30 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:58:50 [main] INFO  o.j.s.c.AccountControllerTest - Starting AccountControllerTest on DESKTOP-5144I2V with PID 6384 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:58:50 [main] INFO  o.j.s.c.AccountControllerTest - The following profiles are active: test
2022-10-03 12:58:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:58:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72ms. Found 0 JDBC repository interfaces.
2022-10-03 12:58:56 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:58:56 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:58:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:58:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:58:59 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:58:59 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:58:59 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:58:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:59:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 445ms
2022-10-03 12:59:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 17ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 27ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 27ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 12:59:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791139986')
2022-10-03 12:59:02 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:59:03 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ac3739d, org.springframework.security.web.context.SecurityContextPersistenceFilter@40830e1e, org.springframework.security.web.header.HeaderWriterFilter@43aa9ccd, org.springframework.web.filter.CorsFilter@6dad684f, org.springframework.security.web.authentication.logout.LogoutFilter@46e77fb7, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@9263c54, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@43e55cfb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@704205ef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@572c50b6, org.springframework.security.web.session.SessionManagementFilter@5930a229, org.springframework.security.web.access.ExceptionTranslationFilter@201a84e1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@399e43d0]
2022-10-03 12:59:03 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:59:03 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:59:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:59:03 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:59:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 160 ms
2022-10-03 12:59:03 [main] INFO  o.j.s.c.AccountControllerTest - Started AccountControllerTest in 15.452 seconds (JVM running for 18.108)
2022-10-03 12:59:04 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@5ba88be8 testClass = AccountControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.AccountControllerTest@556df144, testMethod = profileRegister@AccountControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@56928307 testClass = AccountControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@3899782c key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3972a855, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6a370f4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@74455848, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@649bec2e, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@557caf28], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@a700311]; rollback [true]
2022-10-03 12:59:05 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@5ba88be8 testClass = AccountControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.AccountControllerTest@556df144, testMethod = profileRegister@AccountControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@56928307 testClass = AccountControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@3899782c key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3972a855, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6a370f4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@74455848, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@649bec2e, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@557caf28], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:59:05 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:59:05 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:59:05 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:59:05 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:59:19 [main] INFO  o.j.s.controller.LoginControllerTest - Starting LoginControllerTest on DESKTOP-5144I2V with PID 8960 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:59:19 [main] INFO  o.j.s.controller.LoginControllerTest - The following profiles are active: test
2022-10-03 12:59:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:59:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76ms. Found 0 JDBC repository interfaces.
2022-10-03 12:59:25 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:59:25 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:59:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:59:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:59:28 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:59:28 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:28 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:59:28 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:28 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 402ms
2022-10-03 12:59:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 12ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 8ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 6ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 0ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 9ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 7ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 39ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 25ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 19ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 12:59:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791168378')
2022-10-03 12:59:30 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 12:59:31 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1398e3aa, org.springframework.security.web.context.SecurityContextPersistenceFilter@73502c47, org.springframework.security.web.header.HeaderWriterFilter@7e02331, org.springframework.web.filter.CorsFilter@531bffd, org.springframework.security.web.authentication.logout.LogoutFilter@527e6bd3, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@4d0e1a9a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@66c18b9b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@40cdc640, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31c87223, org.springframework.security.web.session.SessionManagementFilter@3a69c81e, org.springframework.security.web.access.ExceptionTranslationFilter@578a12e9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1802badc]
2022-10-03 12:59:31 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 12:59:32 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 12:59:32 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 12:59:32 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 12:59:32 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 112 ms
2022-10-03 12:59:32 [main] INFO  o.j.s.controller.LoginControllerTest - Started LoginControllerTest in 14.462 seconds (JVM running for 17.501)
2022-10-03 12:59:32 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@65263248, testMethod = loginBadEmailRqEntityNotFoundThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@42d8b670]; rollback [true]
2022-10-03 12:59:33 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=bad@mail.ru, password=test1234)] 
2022-10-03 12:59:33 [main] ERROR o.j.s.handler.EntityExceptionHandler - Entity with person email = bad@mail.ru not found.
org.javaproteam27.socialnetwork.handler.exception.EntityNotFoundException: Entity with person email = bad@mail.ru not found.
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.debugLogger(LoggerAspect.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.service.LoginService$$EnhancerBySpringCGLIB$$c78859e1.login(<generated>)
	at org.javaproteam27.socialnetwork.controller.LoginController.login(LoginController.java:27)
	at org.javaproteam27.socialnetwork.controller.LoginController$$FastClassBySpringCGLIB$$8574860b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.infoLogger(LoggerAspect.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.controller.LoginController$$EnhancerBySpringCGLIB$$3cffebab.login(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:183)
	at org.javaproteam27.socialnetwork.controller.LoginControllerTest.loginBadEmailRqEntityNotFoundThrown(LoginControllerTest.java:75)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)
2022-10-03 12:59:33 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@65263248, testMethod = loginBadEmailRqEntityNotFoundThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:59:33 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@3dbcdd4a, testMethod = loginEmptyRequest400Response@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@42d8b670]; rollback [true]
2022-10-03 12:59:34 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.javaproteam27.socialnetwork.model.dto.response.ResponseRs<org.javaproteam27.socialnetwork.model.dto.response.PersonRs> org.javaproteam27.socialnetwork.controller.LoginController.login(org.javaproteam27.socialnetwork.model.dto.request.LoginRq) throws java.io.IOException,com.dropbox.core.DbxException]
2022-10-03 12:59:34 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@3dbcdd4a, testMethod = loginEmptyRequest400Response@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:59:34 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@7070ae1, testMethod = logoutAuthorizedRqIsOkResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@42d8b670]; rollback [true]
2022-10-03 12:59:34 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [logout], arguments: [] 
2022-10-03 12:59:34 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [logout], return: [ResponseRs(error=, timestamp=1664791174726, offset=null, perPage=null, data={message=ok}, errorDescription=null)] 
2022-10-03 12:59:34 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@7070ae1, testMethod = logoutAuthorizedRqIsOkResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:59:34 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@101d4a4e, testMethod = loginCorrectRqIsOkResponseWithJsonContent@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@42d8b670]; rollback [true]
2022-10-03 12:59:35 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=test@mail.ru, password=test1234)] 
2022-10-03 12:59:37 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], return: [ResponseRs(error=, timestamp=1664791177900, offset=null, perPage=null, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@37bdd4b1, errorDescription=null)] 
2022-10-03 12:59:37 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@101d4a4e, testMethod = loginCorrectRqIsOkResponseWithJsonContent@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:59:37 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@4630c2e5, testMethod = loginBadPasswordRqInvalidRequestThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@42d8b670]; rollback [true]
2022-10-03 12:59:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=test@mail.ru, password=bad)] 
2022-10-03 12:59:38 [main] ERROR o.j.s.handler.EntityExceptionHandler - Incorrect password
org.javaproteam27.socialnetwork.handler.exception.InvalidRequestException: Incorrect password
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.debugLogger(LoggerAspect.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.service.LoginService$$EnhancerBySpringCGLIB$$c78859e1.login(<generated>)
	at org.javaproteam27.socialnetwork.controller.LoginController.login(LoginController.java:27)
	at org.javaproteam27.socialnetwork.controller.LoginController$$FastClassBySpringCGLIB$$8574860b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.infoLogger(LoggerAspect.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.controller.LoginController$$EnhancerBySpringCGLIB$$3cffebab.login(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:183)
	at org.javaproteam27.socialnetwork.controller.LoginControllerTest.loginBadPasswordRqInvalidRequestThrown(LoginControllerTest.java:88)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)
2022-10-03 12:59:38 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@4630c2e5, testMethod = loginBadPasswordRqInvalidRequestThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:59:38 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@1d033ae1, testMethod = logoutUnAuthorizedRqAccessDeniedResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@42d8b670]; rollback [true]
2022-10-03 12:59:39 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@528c868 testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@1d033ae1, testMethod = logoutUnAuthorizedRqAccessDeniedResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@466276d8 testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@5ce8d869 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@702b8b12, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@10163d6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3059cbc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16a0ee18, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@302552ec], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 12:59:39 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 12:59:39 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 12:59:39 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 12:59:39 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 12:59:50 [main] INFO  o.j.s.c.NotificationControllerTest - Starting NotificationControllerTest on DESKTOP-5144I2V with PID 3836 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 12:59:50 [main] INFO  o.j.s.c.NotificationControllerTest - The following profiles are active: test
2022-10-03 12:59:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 12:59:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74ms. Found 0 JDBC repository interfaces.
2022-10-03 12:59:56 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 12:59:56 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 12:59:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 12:59:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 12:59:59 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 12:59:59 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:59 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 12:59:59 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 12:59:59 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 324ms
2022-10-03 12:59:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 53ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 18ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:00:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791199475')
2022-10-03 13:00:02 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:00:03 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3808bdfc, org.springframework.security.web.context.SecurityContextPersistenceFilter@6b886e86, org.springframework.security.web.header.HeaderWriterFilter@4398d, org.springframework.web.filter.CorsFilter@5f709b99, org.springframework.security.web.authentication.logout.LogoutFilter@53fd061d, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@38087342, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4fb53b76, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@52a9c251, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@46ebfc09, org.springframework.security.web.session.SessionManagementFilter@577e2b91, org.springframework.security.web.access.ExceptionTranslationFilter@11e323a6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1ba84d52]
2022-10-03 13:00:03 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:00:03 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:00:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:00:03 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:00:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 140 ms
2022-10-03 13:00:04 [main] INFO  o.j.s.c.NotificationControllerTest - Started NotificationControllerTest in 15.067 seconds (JVM running for 17.689)
2022-10-03 13:00:04 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@76a2ddf3 testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@3c7b040f, testMethod = markAsReadNotificationsAuthorizedPersonWithAllTrueIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@524f3b3a testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@41e68d87 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3a973b5e]; rollback [true]
2022-10-03 13:00:06 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@76a2ddf3 testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@3c7b040f, testMethod = markAsReadNotificationsAuthorizedPersonWithAllTrueIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@524f3b3a testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@41e68d87 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:00:06 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@76a2ddf3 testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@29cbbff7, testMethod = getNotificationsAuthorizedPersonIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@524f3b3a testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@41e68d87 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3a973b5e]; rollback [true]
2022-10-03 13:00:06 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@76a2ddf3 testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@29cbbff7, testMethod = getNotificationsAuthorizedPersonIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@524f3b3a testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@41e68d87 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:00:06 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:00:06 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:00:06 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:00:06 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:00:18 [main] INFO  o.j.s.c.StatisticControllerTest - Starting StatisticControllerTest on DESKTOP-5144I2V with PID 15244 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:00:18 [main] INFO  o.j.s.c.StatisticControllerTest - The following profiles are active: test
2022-10-03 13:00:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:00:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 78ms. Found 0 JDBC repository interfaces.
2022-10-03 13:00:23 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:00:24 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:00:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:00:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:00:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:00:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:00:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:00:26 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:00:27 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:00:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:27 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:00:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:00:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 339ms
2022-10-03 13:00:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 18ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 245ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 100ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 26ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:00:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791227013')
2022-10-03 13:00:29 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:00:30 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d1f60cf, org.springframework.security.web.context.SecurityContextPersistenceFilter@2a59a8fe, org.springframework.security.web.header.HeaderWriterFilter@69dc0dd1, org.springframework.web.filter.CorsFilter@2d7e6c8c, org.springframework.security.web.authentication.logout.LogoutFilter@4e885b9, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@5c234920, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@f758e05, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@10164e94, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@76b35c38, org.springframework.security.web.session.SessionManagementFilter@788cb7b0, org.springframework.security.web.access.ExceptionTranslationFilter@45144fdf, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6809a461]
2022-10-03 13:00:31 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:00:31 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:00:31 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:00:31 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:00:31 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 78 ms
2022-10-03 13:00:31 [main] INFO  o.j.s.c.StatisticControllerTest - Started StatisticControllerTest in 14.612 seconds (JVM running for 17.381)
2022-10-03 13:00:31 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@524f3b3a testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@397ff526, testMethod = getStatisticsAuthorizedPersonIsOkResponseWithJsonContent@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@41e68d87 testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@49ff7d8c key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6fcf3192]; rollback [true]
2022-10-03 13:00:32 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.StatisticController], method: [getStatistics], arguments: [] 
2022-10-03 13:00:32 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.StatisticController], method: [getStatistics], return: [StatisticRs(overallStatisticRs=OverallStatisticRs(usersCount=1, postsCount=0, commentsCount=0, likesCount=0), personalStatisticRs=PersonalStatisticRs(postsCount=0, commentsCount=0, likesCount=0, messagesCount=0))] 
2022-10-03 13:00:32 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@524f3b3a testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@397ff526, testMethod = getStatisticsAuthorizedPersonIsOkResponseWithJsonContent@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@41e68d87 testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@49ff7d8c key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:00:32 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@524f3b3a testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@66121af9, testMethod = getStatisticsUnAuthorizedPersonAccessDeniedResponse@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@41e68d87 testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@49ff7d8c key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6fcf3192]; rollback [true]
2022-10-03 13:00:32 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@524f3b3a testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@66121af9, testMethod = getStatisticsUnAuthorizedPersonAccessDeniedResponse@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@41e68d87 testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@49ff7d8c key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:00:32 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:00:32 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:00:32 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:00:32 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:00:47 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 14348 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:00:47 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 13:00:49 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:00:49 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74ms. Found 0 JDBC repository interfaces.
2022-10-03 13:00:53 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:00:53 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:00:54 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:00:54 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:00:56 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:00:56 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:56 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:00:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 312ms
2022-10-03 13:00:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 19ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 31ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 31ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 35ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 45ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 18ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:00:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 24ms
2022-10-03 13:00:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791256480')
2022-10-03 13:00:58 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:00:59 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7194f5b, org.springframework.security.web.context.SecurityContextPersistenceFilter@48b53f3d, org.springframework.security.web.header.HeaderWriterFilter@7d91e9c9, org.springframework.web.filter.CorsFilter@1e0be005, org.springframework.security.web.authentication.logout.LogoutFilter@35f79e6d, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@a056b26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@57bd0b3c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@118932fe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fd226da, org.springframework.security.web.session.SessionManagementFilter@ebd4486, org.springframework.security.web.access.ExceptionTranslationFilter@9d10078, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70b9a553]
2022-10-03 13:00:59 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:01:00 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:01:00 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:01:00 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:01:00 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 85 ms
2022-10-03 13:01:00 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.186 seconds (JVM running for 16.971)
2022-10-03 13:01:00 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3d3e5463 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@65c2610f, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@64a40280 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b40f651 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5813046e]; rollback [true]
2022-10-03 13:01:01 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTEyNjEsImV4cCI6MTY2NDc5NDg2MX0.RBLyXSVG7FA28vvqSnYM-BorYoxjnYSOrETkueFq-rE] 
2022-10-03 13:01:03 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664791263906, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@1908483f, errorDescription=null)] 
2022-10-03 13:01:04 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3d3e5463 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@65c2610f, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@64a40280 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b40f651 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:01:04 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3d3e5463 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@1bd99de6, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@64a40280 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b40f651 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5813046e]; rollback [true]
2022-10-03 13:01:04 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3d3e5463 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@1bd99de6, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@64a40280 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b40f651 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:01:04 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3d3e5463 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@41cc3795, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@64a40280 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b40f651 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5813046e]; rollback [true]
2022-10-03 13:01:04 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Тест, lastName=Тестов, birthDate=1987-07-01T00:00:00+04:00, phone=8064581946, photoId=null, about=null, city=Москва, country=Россия, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTEyNjQsImV4cCI6MTY2NDc5NDg2NH0.mNBDjg72mpqHdNfLzz2t6dOUSC3t3YHWdWxVnmCgbTY] 
2022-10-03 13:01:04 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 13:01:04 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3d3e5463 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@41cc3795, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@64a40280 testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b40f651 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:01:04 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:01:04 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:01:04 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:01:04 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:01:15 [main] INFO  o.j.s.service.LoginServiceTest - Starting LoginServiceTest on DESKTOP-5144I2V with PID 3916 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:01:15 [main] INFO  o.j.s.service.LoginServiceTest - The following profiles are active: test
2022-10-03 13:01:17 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:01:17 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86ms. Found 0 JDBC repository interfaces.
2022-10-03 13:01:21 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:01:21 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:01:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:01:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:01:24 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:01:24 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:24 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:01:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:25 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:01:25 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:25 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 378ms
2022-10-03 13:01:25 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 0ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 30ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 27ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 18ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:26 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:01:26 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791284658')
2022-10-03 13:01:26 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:01:27 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b886e86, org.springframework.security.web.context.SecurityContextPersistenceFilter@3299cc9f, org.springframework.security.web.header.HeaderWriterFilter@1911427a, org.springframework.web.filter.CorsFilter@f758e05, org.springframework.security.web.authentication.logout.LogoutFilter@11b5b1f2, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@79ab97fd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b991034, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@14404be2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@46e77fb7, org.springframework.security.web.session.SessionManagementFilter@3abe8714, org.springframework.security.web.access.ExceptionTranslationFilter@50cfe725, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@62a07c01]
2022-10-03 13:01:28 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:01:28 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:01:28 [main] INFO  o.j.s.service.LoginServiceTest - Started LoginServiceTest in 14.283 seconds (JVM running for 16.634)
2022-10-03 13:01:29 [main] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder - Encoded password does not look like BCrypt
2022-10-03 13:01:30 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:01:30 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:01:30 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:01:30 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:01:48 [main] INFO  o.j.s.s.NotificationServiceTest - Starting NotificationServiceTest on DESKTOP-5144I2V with PID 14972 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:01:48 [main] INFO  o.j.s.s.NotificationServiceTest - The following profiles are active: test
2022-10-03 13:01:50 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:01:50 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74ms. Found 0 JDBC repository interfaces.
2022-10-03 13:01:54 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:01:54 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:01:55 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:01:55 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:01:57 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:01:57 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:57 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:01:57 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:01:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:01:58 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:58 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 317ms
2022-10-03 13:01:58 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:01:59 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:01:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 19ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 24ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 78ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 22ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 29ms
2022-10-03 13:02:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791317921')
2022-10-03 13:02:00 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:02:01 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@43c73b5c, org.springframework.security.web.context.SecurityContextPersistenceFilter@2822ee4b, org.springframework.security.web.header.HeaderWriterFilter@581661d6, org.springframework.web.filter.CorsFilter@6b1381fc, org.springframework.security.web.authentication.logout.LogoutFilter@31efe094, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@448ade1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23ac164d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4a9a0d9d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@48b53f3d, org.springframework.security.web.session.SessionManagementFilter@2c2f4769, org.springframework.security.web.access.ExceptionTranslationFilter@13b012, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@11e323a6]
2022-10-03 13:02:01 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:02:01 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:02:01 [main] INFO  o.j.s.s.NotificationServiceTest - Started NotificationServiceTest in 14.234 seconds (JVM running for 16.72)
2022-10-03 13:02:03 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:02:03 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:02:03 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:02:03 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:02:16 [main] INFO  o.j.s.service.StatisticServiceTest - Starting StatisticServiceTest on DESKTOP-5144I2V with PID 3652 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:02:16 [main] INFO  o.j.s.service.StatisticServiceTest - The following profiles are active: test
2022-10-03 13:02:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:02:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71ms. Found 0 JDBC repository interfaces.
2022-10-03 13:02:23 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:02:24 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:02:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:02:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:02:27 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:02:27 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:02:27 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:02:27 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:27 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 309ms
2022-10-03 13:02:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 26ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 36ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:02:29 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:02:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4791347392')
2022-10-03 13:02:29 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:02:30 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@577e2b91, org.springframework.security.web.context.SecurityContextPersistenceFilter@3abe8714, org.springframework.security.web.header.HeaderWriterFilter@2c226db0, org.springframework.web.filter.CorsFilter@68a06914, org.springframework.security.web.authentication.logout.LogoutFilter@3c41b4b, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3e9beef2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f3d33bc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4057babc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a59a8fe, org.springframework.security.web.session.SessionManagementFilter@1835b24b, org.springframework.security.web.access.ExceptionTranslationFilter@53a4637c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@43e55cfb]
2022-10-03 13:02:31 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:02:31 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:02:31 [main] INFO  o.j.s.service.StatisticServiceTest - Started StatisticServiceTest in 16.217 seconds (JVM running for 18.926)
2022-10-03 13:02:32 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:02:32 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:02:32 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:02:32 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:20:44 [main] INFO  o.j.s.c.AccountControllerTest - Starting AccountControllerTest on DESKTOP-5144I2V with PID 14044 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:20:44 [main] INFO  o.j.s.c.AccountControllerTest - The following profiles are active: test
2022-10-03 13:20:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:20:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73ms. Found 0 JDBC repository interfaces.
2022-10-03 13:20:50 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:20:51 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:20:51 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:20:52 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:20:54 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:20:54 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:20:54 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:20:54 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:54 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 326ms
2022-10-03 13:20:54 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 2ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 90ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 19ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 24ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:20:56 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:20:56 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792454457')
2022-10-03 13:20:56 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:20:57 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@679cdfc3, org.springframework.security.web.context.SecurityContextPersistenceFilter@11e323a6, org.springframework.security.web.header.HeaderWriterFilter@6bd21eb7, org.springframework.web.filter.CorsFilter@3e07ccbf, org.springframework.security.web.authentication.logout.LogoutFilter@5eace68f, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@33bdd01, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@537979aa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2fbbdca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@70b9a553, org.springframework.security.web.session.SessionManagementFilter@13eb8ca, org.springframework.security.web.access.ExceptionTranslationFilter@25ea3a5f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@342615e2]
2022-10-03 13:20:58 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:20:58 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:20:58 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:20:58 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:20:58 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 94 ms
2022-10-03 13:20:58 [main] INFO  o.j.s.c.AccountControllerTest - Started AccountControllerTest in 15.546 seconds (JVM running for 19.028)
2022-10-03 13:20:58 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@1603cd68 testClass = AccountControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.AccountControllerTest@41737438, testMethod = profileRegister@AccountControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@9ebe38b testClass = AccountControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b23c30a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@55b53d44, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6a6afff2, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@346d61be, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2accdbb5, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@175c2241], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@316a682b]; rollback [true]
2022-10-03 13:21:00 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@1603cd68 testClass = AccountControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.AccountControllerTest@41737438, testMethod = profileRegister@AccountControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@9ebe38b testClass = AccountControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@4b23c30a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@55b53d44, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6a6afff2, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@346d61be, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2accdbb5, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@175c2241], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:21:00 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:21:00 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:21:00 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:21:00 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:21:28 [main] INFO  o.j.s.c.CommentsControllerTest - Starting CommentsControllerTest on DESKTOP-5144I2V with PID 2516 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:21:28 [main] INFO  o.j.s.c.CommentsControllerTest - The following profiles are active: test
2022-10-03 13:21:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:21:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69ms. Found 0 JDBC repository interfaces.
2022-10-03 13:21:34 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:21:34 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:21:35 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:21:35 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:21:37 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:21:37 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:21:37 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:21:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:21:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:21:38 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:38 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 399ms
2022-10-03 13:21:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 32ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 45ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 34ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:21:41 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:21:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792497858')
2022-10-03 13:21:41 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:21:42 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@157002b7, org.springframework.security.web.context.SecurityContextPersistenceFilter@189fe8af, org.springframework.security.web.header.HeaderWriterFilter@3cced001, org.springframework.web.filter.CorsFilter@66227940, org.springframework.security.web.authentication.logout.LogoutFilter@6b28d4e4, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@74b1838, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@40cdc640, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@119d21ce, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ba76911, org.springframework.security.web.session.SessionManagementFilter@6ab123d0, org.springframework.security.web.access.ExceptionTranslationFilter@7061a5e7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1766b7]
2022-10-03 13:21:43 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:21:43 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:21:43 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:21:43 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:21:43 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 167 ms
2022-10-03 13:21:43 [main] INFO  o.j.s.c.CommentsControllerTest - Started CommentsControllerTest in 16.237 seconds (JVM running for 19.71)
2022-10-03 13:21:43 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@7db644d5, testMethod = editComment@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@43051a8d]; rollback [true]
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [editComment], arguments: [1, 1, CommentRq(parentId=null, commentText=New comment from test to post 1, getDeleted=null)] 
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [editComment], return: [ResponseRs(error=, timestamp=1664792505206, offset=null, perPage=null, data=CommentRs(id=1, time=1664792505189, postId=1, parentId=null, author=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@433f8efa, commentText=New comment from test to post 1, isBlocked=false, isDeleted=false, subComments=[], subLikes=null, myLike=null), errorDescription=null)] 
2022-10-03 13:21:45 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@7db644d5, testMethod = editComment@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:21:45 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@bea7f47, testMethod = createComment@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@43051a8d]; rollback [true]
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [createComment], arguments: [1, CommentRq(parentId=null, commentText=Added in test comment to post 1, getDeleted=null)] 
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [createComment], return: [ResponseRs(error=, timestamp=1664792505508, offset=null, perPage=null, data=CommentRs(id=2, time=1664792505450, postId=1, parentId=null, author=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@f912cf3, commentText=Added in test comment to post 1, isBlocked=false, isDeleted=false, subComments=[], subLikes=null, myLike=null), errorDescription=null)] 
2022-10-03 13:21:45 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@bea7f47, testMethod = createComment@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:21:45 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@408530d2, testMethod = deleteComment@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@43051a8d]; rollback [true]
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [deleteComment], arguments: [1, 1] 
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [deleteComment], return: [ResponseRs(error=, timestamp=1664792505552, offset=null, perPage=null, data=CommentRs(id=1, time=null, postId=null, parentId=null, author=null, commentText=null, isBlocked=null, isDeleted=null, subComments=null, subLikes=null, myLike=null), errorDescription=null)] 
2022-10-03 13:21:45 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@408530d2, testMethod = deleteComment@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:21:45 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@4d71deeb, testMethod = getComments@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@43051a8d]; rollback [true]
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [getComments], arguments: [1, 0, 10] 
2022-10-03 13:21:45 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.CommentsController], method: [getComments], return: [ListResponseRs(error=, timestamp=1664792505646, total=1, offset=0, perPage=10, data=[CommentRs(id=1, time=1664729739594, postId=1, parentId=0, author=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@7ac47e87, commentText=Test comment to post 1, isBlocked=false, isDeleted=false, subComments=[], subLikes=0, myLike=false)], errorDescription=null)] 
2022-10-03 13:21:45 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@d62fe5b testClass = CommentsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.CommentsControllerTest@4d71deeb, testMethod = getComments@CommentsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@49964d75 testClass = CommentsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@528c868 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2accdbb5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5ace1ed4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@d29f28, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7e5afaa6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@4116aac9], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:21:45 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:21:45 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:21:45 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:21:45 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:21:59 [main] INFO  o.j.s.controller.FeedsControllerTest - Starting FeedsControllerTest on DESKTOP-5144I2V with PID 10900 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:21:59 [main] INFO  o.j.s.controller.FeedsControllerTest - The following profiles are active: test
2022-10-03 13:22:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:22:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 114ms. Found 0 JDBC repository interfaces.
2022-10-03 13:22:05 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:22:05 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:22:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:22:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:22:08 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:22:08 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:08 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:22:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:22:09 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:09 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 361ms
2022-10-03 13:22:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 18ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 27ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 0ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 21ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 122ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 40ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 78ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:11 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 31ms
2022-10-03 13:22:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792528961')
2022-10-03 13:22:11 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:22:12 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@572c50b6, org.springframework.security.web.context.SecurityContextPersistenceFilter@26350832, org.springframework.security.web.header.HeaderWriterFilter@708ddfd3, org.springframework.web.filter.CorsFilter@33606f4b, org.springframework.security.web.authentication.logout.LogoutFilter@6b1381fc, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@5a47730c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@650ee893, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61aaec51, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@222ebd21, org.springframework.security.web.session.SessionManagementFilter@204d101, org.springframework.security.web.access.ExceptionTranslationFilter@623e578b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@411e886b]
2022-10-03 13:22:12 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:22:13 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:22:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:22:13 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:22:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 130 ms
2022-10-03 13:22:13 [main] INFO  o.j.s.controller.FeedsControllerTest - Started FeedsControllerTest in 15.799 seconds (JVM running for 18.695)
2022-10-03 13:22:13 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@66c61024 testClass = FeedsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.FeedsControllerTest@2395c168, testMethod = getAllPost@FeedsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@61fe30 testClass = FeedsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@c9d0d6 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2892dae4, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3315d2d7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10959ece, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@51dcb805, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@411f53a0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@32e9c8]; rollback [true]
2022-10-03 13:22:14 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@66c61024 testClass = FeedsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.FeedsControllerTest@2395c168, testMethod = getAllPost@FeedsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@61fe30 testClass = FeedsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@c9d0d6 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2892dae4, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3315d2d7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10959ece, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@51dcb805, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@411f53a0], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:22:14 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:22:14 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:22:14 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:22:14 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:22:35 [main] INFO  o.j.s.controller.LikesControllerTest - Starting LikesControllerTest on DESKTOP-5144I2V with PID 4544 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:22:35 [main] INFO  o.j.s.controller.LikesControllerTest - The following profiles are active: test
2022-10-03 13:22:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:22:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80ms. Found 0 JDBC repository interfaces.
2022-10-03 13:22:42 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:22:42 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:22:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:22:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:22:45 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:22:45 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:45 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:22:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:22:46 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:22:46 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:46 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 451ms
2022-10-03 13:22:46 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 57ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 31ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:22:48 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 25ms
2022-10-03 13:22:48 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792565912')
2022-10-03 13:22:48 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:22:49 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f014f27, org.springframework.security.web.context.SecurityContextPersistenceFilter@5a32ab89, org.springframework.security.web.header.HeaderWriterFilter@2df019b8, org.springframework.web.filter.CorsFilter@185b998d, org.springframework.security.web.authentication.logout.LogoutFilter@1ab6a093, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@1d4cc7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36b5dbdf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@232e4e1d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47c8c176, org.springframework.security.web.session.SessionManagementFilter@5bb0122, org.springframework.security.web.access.ExceptionTranslationFilter@8802edd, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@76296c86]
2022-10-03 13:22:49 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:22:50 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:22:50 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:22:50 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:22:50 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 105 ms
2022-10-03 13:22:50 [main] INFO  o.j.s.controller.LikesControllerTest - Started LikesControllerTest in 15.279 seconds (JVM running for 17.696)
2022-10-03 13:22:50 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3e7634b9 testClass = LikesControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LikesControllerTest@580581b4, testMethod = getLikeList@LikesControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6f0b0a5e testClass = LikesControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6035b93b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4c012563, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4bd31064, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@766653e6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986852, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@23bb8443], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@65e4ee59]; rollback [true]
2022-10-03 13:22:51 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3e7634b9 testClass = LikesControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LikesControllerTest@580581b4, testMethod = getLikeList@LikesControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6f0b0a5e testClass = LikesControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6035b93b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4c012563, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4bd31064, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@766653e6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986852, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@23bb8443], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:22:51 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3e7634b9 testClass = LikesControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LikesControllerTest@42c661d4, testMethod = putLike@LikesControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6f0b0a5e testClass = LikesControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6035b93b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4c012563, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4bd31064, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@766653e6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986852, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@23bb8443], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@65e4ee59]; rollback [true]
2022-10-03 13:22:51 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3e7634b9 testClass = LikesControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LikesControllerTest@42c661d4, testMethod = putLike@LikesControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6f0b0a5e testClass = LikesControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6035b93b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4c012563, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4bd31064, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@766653e6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986852, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@23bb8443], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:22:51 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3e7634b9 testClass = LikesControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LikesControllerTest@3567edfe, testMethod = deleteLike@LikesControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6f0b0a5e testClass = LikesControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6035b93b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4c012563, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4bd31064, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@766653e6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986852, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@23bb8443], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@65e4ee59]; rollback [true]
2022-10-03 13:22:51 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3e7634b9 testClass = LikesControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LikesControllerTest@3567edfe, testMethod = deleteLike@LikesControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6f0b0a5e testClass = LikesControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@6035b93b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4c012563, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4bd31064, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@766653e6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986852, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@23bb8443], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:22:51 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:22:51 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:22:51 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:22:51 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:23:07 [main] INFO  o.j.s.controller.LoginControllerTest - Starting LoginControllerTest on DESKTOP-5144I2V with PID 14988 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:23:07 [main] INFO  o.j.s.controller.LoginControllerTest - The following profiles are active: test
2022-10-03 13:23:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:23:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74ms. Found 0 JDBC repository interfaces.
2022-10-03 13:23:13 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:23:14 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:23:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:23:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:23:16 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:23:17 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:23:17 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:23:17 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:23:17 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:17 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 310ms
2022-10-03 13:23:17 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 21ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 60ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 23ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:23:19 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:23:19 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792597167')
2022-10-03 13:23:19 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:23:20 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@353aadd7, org.springframework.security.web.context.SecurityContextPersistenceFilter@74ed11d7, org.springframework.security.web.header.HeaderWriterFilter@69a61267, org.springframework.web.filter.CorsFilter@39595a8, org.springframework.security.web.authentication.logout.LogoutFilter@1871068d, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@591be8aa, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@510cefb6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1509dade, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@26169be3, org.springframework.security.web.session.SessionManagementFilter@4b5dd040, org.springframework.security.web.access.ExceptionTranslationFilter@1c586bb6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@50a1c2f3]
2022-10-03 13:23:21 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:23:21 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:23:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:23:21 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:23:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 98 ms
2022-10-03 13:23:21 [main] INFO  o.j.s.controller.LoginControllerTest - Started LoginControllerTest in 14.872 seconds (JVM running for 18.28)
2022-10-03 13:23:21 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@77199818, testMethod = loginBadEmailRqEntityNotFoundThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6723626f]; rollback [true]
2022-10-03 13:23:22 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=bad@mail.ru, password=test1234)] 
2022-10-03 13:23:22 [main] ERROR o.j.s.handler.EntityExceptionHandler - Entity with person email = bad@mail.ru not found.
org.javaproteam27.socialnetwork.handler.exception.EntityNotFoundException: Entity with person email = bad@mail.ru not found.
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.debugLogger(LoggerAspect.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.service.LoginService$$EnhancerBySpringCGLIB$$2e2a70ca.login(<generated>)
	at org.javaproteam27.socialnetwork.controller.LoginController.login(LoginController.java:27)
	at org.javaproteam27.socialnetwork.controller.LoginController$$FastClassBySpringCGLIB$$8574860b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.infoLogger(LoggerAspect.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.controller.LoginController$$EnhancerBySpringCGLIB$$a3a20294.login(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:183)
	at org.javaproteam27.socialnetwork.controller.LoginControllerTest.loginBadEmailRqEntityNotFoundThrown(LoginControllerTest.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)
2022-10-03 13:23:22 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@77199818, testMethod = loginBadEmailRqEntityNotFoundThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:23:22 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@48f9f1d6, testMethod = loginEmptyRequest400Response@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6723626f]; rollback [true]
2022-10-03 13:23:22 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.javaproteam27.socialnetwork.model.dto.response.ResponseRs<org.javaproteam27.socialnetwork.model.dto.response.PersonRs> org.javaproteam27.socialnetwork.controller.LoginController.login(org.javaproteam27.socialnetwork.model.dto.request.LoginRq) throws java.io.IOException,com.dropbox.core.DbxException]
2022-10-03 13:23:22 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@48f9f1d6, testMethod = loginEmptyRequest400Response@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:23:22 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@6e4c5d88, testMethod = logoutAuthorizedRqIsOkResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6723626f]; rollback [true]
2022-10-03 13:23:22 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [logout], arguments: [] 
2022-10-03 13:23:22 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [logout], return: [ResponseRs(error=, timestamp=1664792602533, offset=null, perPage=null, data={message=ok}, errorDescription=null)] 
2022-10-03 13:23:22 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@6e4c5d88, testMethod = logoutAuthorizedRqIsOkResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:23:22 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@4b79eecc, testMethod = loginCorrectRqIsOkResponseWithJsonContent@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6723626f]; rollback [true]
2022-10-03 13:23:22 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=test@mail.ru, password=test1234)] 
2022-10-03 13:23:26 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], return: [ResponseRs(error=, timestamp=1664792606252, offset=null, perPage=null, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@74b795da, errorDescription=null)] 
2022-10-03 13:23:26 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@4b79eecc, testMethod = loginCorrectRqIsOkResponseWithJsonContent@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:23:26 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@1a8251ba, testMethod = loginBadPasswordRqInvalidRequestThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6723626f]; rollback [true]
2022-10-03 13:23:26 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=test@mail.ru, password=bad)] 
2022-10-03 13:23:26 [main] ERROR o.j.s.handler.EntityExceptionHandler - Incorrect password
org.javaproteam27.socialnetwork.handler.exception.InvalidRequestException: Incorrect password
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.debugLogger(LoggerAspect.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.service.LoginService$$EnhancerBySpringCGLIB$$2e2a70ca.login(<generated>)
	at org.javaproteam27.socialnetwork.controller.LoginController.login(LoginController.java:27)
	at org.javaproteam27.socialnetwork.controller.LoginController$$FastClassBySpringCGLIB$$8574860b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at org.javaproteam27.socialnetwork.aop.LoggerAspect.infoLogger(LoggerAspect.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at org.javaproteam27.socialnetwork.controller.LoginController$$EnhancerBySpringCGLIB$$a3a20294.login(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:34)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:183)
	at org.javaproteam27.socialnetwork.controller.LoginControllerTest.loginBadPasswordRqInvalidRequestThrown(LoginControllerTest.java:87)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)
2022-10-03 13:23:26 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@1a8251ba, testMethod = loginBadPasswordRqInvalidRequestThrown@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:23:26 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@1c8a2bec, testMethod = logoutUnAuthorizedRqAccessDeniedResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@6723626f]; rollback [true]
2022-10-03 13:23:26 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@4b23c30a testClass = LoginControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.LoginControllerTest@1c8a2bec, testMethod = logoutUnAuthorizedRqAccessDeniedResponse@LoginControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@38089a5a testClass = LoginControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@30e868be key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d910fd6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77eca502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5fd4f8f5, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2dde1bff, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3c41ed1d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:23:26 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:23:26 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:23:26 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:23:26 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:23:50 [main] INFO  o.j.s.c.NotificationControllerTest - Starting NotificationControllerTest on DESKTOP-5144I2V with PID 14164 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:23:50 [main] INFO  o.j.s.c.NotificationControllerTest - The following profiles are active: test
2022-10-03 13:23:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:23:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 77ms. Found 0 JDBC repository interfaces.
2022-10-03 13:23:56 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:23:57 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:23:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:23:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:23:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:23:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:23:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:23:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:23:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:23:59 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:23:59 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:24:00 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:24:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:00 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:24:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:24:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:24:00 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:00 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 348ms
2022-10-03 13:24:00 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 64ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:02 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:24:02 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792640178')
2022-10-03 13:24:02 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:24:03 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1fd226da, org.springframework.security.web.context.SecurityContextPersistenceFilter@4fb53b76, org.springframework.security.web.header.HeaderWriterFilter@759fe679, org.springframework.web.filter.CorsFilter@36cd58e7, org.springframework.security.web.authentication.logout.LogoutFilter@742ce3ad, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@a056b26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@24e63b9f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3b256d50, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7be3baf2, org.springframework.security.web.session.SessionManagementFilter@7d6f094e, org.springframework.security.web.access.ExceptionTranslationFilter@537979aa, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@591dd039]
2022-10-03 13:24:03 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:24:03 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:24:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:24:03 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:24:04 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 95 ms
2022-10-03 13:24:04 [main] INFO  o.j.s.c.NotificationControllerTest - Started NotificationControllerTest in 14.605 seconds (JVM running for 17.223)
2022-10-03 13:24:04 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@7331196b testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@2d4df467, testMethod = markAsReadNotificationsAuthorizedPersonWithAllTrueIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3f9342d4 testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@ab7395e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5da61ee2]; rollback [true]
2022-10-03 13:24:05 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@7331196b testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@2d4df467, testMethod = markAsReadNotificationsAuthorizedPersonWithAllTrueIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3f9342d4 testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@ab7395e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:24:05 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@7331196b testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@2ba0948f, testMethod = getNotificationsAuthorizedPersonIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3f9342d4 testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@ab7395e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5da61ee2]; rollback [true]
2022-10-03 13:24:05 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@7331196b testClass = NotificationControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.NotificationControllerTest@2ba0948f, testMethod = getNotificationsAuthorizedPersonIsOkResponseWithJsonContent@NotificationControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3f9342d4 testClass = NotificationControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@ab7395e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@625732, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@cad498c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@193f604a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@10d307f1, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@3cd3e762], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:24:05 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:24:05 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:24:05 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:24:05 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:24:19 [main] INFO  o.j.s.controller.PostsControllerTest - Starting PostsControllerTest on DESKTOP-5144I2V with PID 4308 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:24:19 [main] INFO  o.j.s.controller.PostsControllerTest - The following profiles are active: test
2022-10-03 13:24:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:24:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 81ms. Found 0 JDBC repository interfaces.
2022-10-03 13:24:24 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:24:25 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:24:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:24:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:24:28 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:24:28 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:28 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:24:28 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:28 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 513ms
2022-10-03 13:24:28 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 64ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 27ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 21ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 45ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 32ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:24:31 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:24:31 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 34ms
2022-10-03 13:24:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792668230')
2022-10-03 13:24:31 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:24:31 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1c7159d5, org.springframework.security.web.context.SecurityContextPersistenceFilter@4c19b0a8, org.springframework.security.web.header.HeaderWriterFilter@69aecbba, org.springframework.web.filter.CorsFilter@62cad0e8, org.springframework.security.web.authentication.logout.LogoutFilter@7aac05e2, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@7e747037, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ab123d0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5cea34e6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1659a0ff, org.springframework.security.web.session.SessionManagementFilter@79d31e24, org.springframework.security.web.access.ExceptionTranslationFilter@71dbfe64, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3cd3cf6b]
2022-10-03 13:24:32 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:24:32 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:24:32 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:24:32 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:24:32 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 96 ms
2022-10-03 13:24:32 [main] INFO  o.j.s.controller.PostsControllerTest - Started PostsControllerTest in 14.6 seconds (JVM running for 17.634)
2022-10-03 13:24:32 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@73f83bff, testMethod = updatePost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5e9c6d8a]; rollback [true]
2022-10-03 13:24:33 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@73f83bff, testMethod = updatePost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:24:33 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@70b38e0, testMethod = getPost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5e9c6d8a]; rollback [true]
2022-10-03 13:24:33 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@70b38e0, testMethod = getPost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:24:33 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@1f93cdc0, testMethod = recoverPost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5e9c6d8a]; rollback [true]
2022-10-03 13:24:33 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@1f93cdc0, testMethod = recoverPost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:24:33 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@289f9094, testMethod = deletePost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@5e9c6d8a]; rollback [true]
2022-10-03 13:24:33 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@2ef14fe testClass = PostsControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.PostsControllerTest@289f9094, testMethod = deletePost@PostsControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77102b91 testClass = PostsControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@45312be2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41e1e210, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@44821a96, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@15bbf42f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@14555e0a, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@477b4cdf], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:24:33 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:24:33 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:24:33 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:24:33 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:24:51 [main] INFO  o.j.s.c.StatisticControllerTest - Starting StatisticControllerTest on DESKTOP-5144I2V with PID 12152 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:24:51 [main] INFO  o.j.s.c.StatisticControllerTest - The following profiles are active: test
2022-10-03 13:24:53 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:24:53 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 89ms. Found 0 JDBC repository interfaces.
2022-10-03 13:24:57 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:24:57 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:24:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:24:59 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:25:01 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:25:01 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:01 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:25:01 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:01 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 336ms
2022-10-03 13:25:01 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 22ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 25ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 36ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 72ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 18ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:03 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:25:03 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792701354')
2022-10-03 13:25:03 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:25:04 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f2d681a, org.springframework.security.web.context.SecurityContextPersistenceFilter@24e63b9f, org.springframework.security.web.header.HeaderWriterFilter@426fb1c3, org.springframework.web.filter.CorsFilter@50588ef6, org.springframework.security.web.authentication.logout.LogoutFilter@ad7cc49, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@2a5abd3c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74a29300, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@32b273c1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10744fff, org.springframework.security.web.session.SessionManagementFilter@3552eb5b, org.springframework.security.web.access.ExceptionTranslationFilter@2044a11b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@55aadbf2]
2022-10-03 13:25:04 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:25:05 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:25:05 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:25:05 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:25:05 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 91 ms
2022-10-03 13:25:05 [main] INFO  o.j.s.c.StatisticControllerTest - Started StatisticControllerTest in 15.055 seconds (JVM running for 17.676)
2022-10-03 13:25:05 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3f9342d4 testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@73e4ecb, testMethod = getStatisticsAuthorizedPersonIsOkResponseWithJsonContent@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@ab7395e testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@50d13246 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@11c95035]; rollback [true]
2022-10-03 13:25:06 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.StatisticController], method: [getStatistics], arguments: [] 
2022-10-03 13:25:06 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.StatisticController], method: [getStatistics], return: [StatisticRs(overallStatisticRs=OverallStatisticRs(usersCount=1, postsCount=0, commentsCount=0, likesCount=0), personalStatisticRs=PersonalStatisticRs(postsCount=0, commentsCount=0, likesCount=0, messagesCount=0))] 
2022-10-03 13:25:06 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3f9342d4 testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@73e4ecb, testMethod = getStatisticsAuthorizedPersonIsOkResponseWithJsonContent@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@ab7395e testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@50d13246 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:06 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@3f9342d4 testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@faa70af, testMethod = getStatisticsUnAuthorizedPersonAccessDeniedResponse@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@ab7395e testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@50d13246 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@11c95035]; rollback [true]
2022-10-03 13:25:06 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@3f9342d4 testClass = StatisticControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.StatisticControllerTest@faa70af, testMethod = getStatisticsUnAuthorizedPersonAccessDeniedResponse@StatisticControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@ab7395e testClass = StatisticControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@50d13246 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@732c2a62, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@120f102b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c130c45, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73700b80, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f03482], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:06 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:25:06 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:25:06 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:25:06 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:25:20 [main] INFO  o.j.s.controller.UserControllerTest - Starting UserControllerTest on DESKTOP-5144I2V with PID 11688 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:25:20 [main] INFO  o.j.s.controller.UserControllerTest - The following profiles are active: test
2022-10-03 13:25:22 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:25:22 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72ms. Found 0 JDBC repository interfaces.
2022-10-03 13:25:26 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:25:26 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:25:27 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:25:27 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:25:29 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:25:29 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:29 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:25:29 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:25:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:25:30 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:30 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 475ms
2022-10-03 13:25:30 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:25:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:31 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 19ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 93ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 25ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 18ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:25:32 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:25:32 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792729930')
2022-10-03 13:25:32 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:25:32 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5967f0ff, org.springframework.security.web.context.SecurityContextPersistenceFilter@2c3d46d6, org.springframework.security.web.header.HeaderWriterFilter@39df2652, org.springframework.web.filter.CorsFilter@580694ce, org.springframework.security.web.authentication.logout.LogoutFilter@77fec3b6, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@2ad7bd26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a6e940b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@742ce3ad, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5be521cd, org.springframework.security.web.session.SessionManagementFilter@3392d69b, org.springframework.security.web.access.ExceptionTranslationFilter@38de4f1d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7194f5b]
2022-10-03 13:25:33 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:25:33 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2022-10-03 13:25:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2022-10-03 13:25:33 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:25:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 174 ms
2022-10-03 13:25:33 [main] INFO  o.j.s.controller.UserControllerTest - Started UserControllerTest in 14.405 seconds (JVM running for 17.224)
2022-10-03 13:25:34 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@1768c77f, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3abe1c9e]; rollback [true]
2022-10-03 13:25:34 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTI3MzQsImV4cCI6MTY2NDc5NjMzNH0.6X_0hO5k7FNPLya8IZMpoUgtp7fM9qlBTWppf3KoiEc] 
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664792738146, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@850579f, errorDescription=null)] 
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@1768c77f, testMethod = profileResponseAuthorizedPersonIsOkResponseWithJsonContent@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@1f404aa1, testMethod = publishPost@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3abe1c9e]; rollback [true]
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [publishPost], arguments: [1664879138316, PostRq(title=Test post, postText=New post from test, tags=[], getDeleted=null), 1] 
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [publishPost], return: [ResponseRs(error=, timestamp=1664792738542, offset=null, perPage=null, data=PostRs(id=3, time=1664879138316, author=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@5f50f63e, title=Test post, likes=0, tags=[], commentRs=[], type=QUEUED, postText=New post from test, isBlocked=false, myLike=false), errorDescription=null)] 
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@1f404aa1, testMethod = publishPost@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@5d77efc8, testMethod = getUserPosts@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3abe1c9e]; rollback [true]
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], arguments: [1, 0, 20] 
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], return: [ListResponseRs(error=, timestamp=1664792738707, total=2, offset=0, perPage=20, data=[PostRs(id=2, time=1664616110857, author=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@46611be4, title=Test Deleted Post, likes=0, tags=[], commentRs=[], type=DELETED, postText=<p>test!</p>, isBlocked=false, myLike=false), PostRs(id=1, time=1664616110857, author=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@6cd79426, title=Test Post, likes=0, tags=[], commentRs=[], type=POSTED, postText=<p>test!</p>, isBlocked=false, myLike=false)], errorDescription=null)] 
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@5d77efc8, testMethod = getUserPosts@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@57c2bedf, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3abe1c9e]; rollback [true]
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@57c2bedf, testMethod = profileResponseUnAuthorizedPersonAccessDeniedResponse@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@2e706bc6, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3abe1c9e]; rollback [true]
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], arguments: [UserRq(firstName=Тест, lastName=Тестов, birthDate=1987-07-01T00:00:00+04:00, phone=8064581946, photoId=null, about=null, city=Москва, country=Россия, messagesPermission=null), eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0QG1haWwucnUiLCJpYXQiOjE2NjQ3OTI3MzgsImV4cCI6MTY2NDc5NjMzOH0.kjrD-yH2C4qdK_xjdPrL9NoNVRS6DjPIUR_c3beBa1s] 
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [editUser], return: [<200 OK OK,UserRs(error=null, timestamp=0, data=null, errorDescription=null),[]>] 
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@2e706bc6, testMethod = profileEditInformation@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:38 [main] INFO  o.s.t.c.t.TransactionContext - Began transaction (1) for test context [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@78f9b1ec, testMethod = getUserInfo@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@3abe1c9e]; rollback [true]
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserInfo], arguments: [1] 
2022-10-03 13:25:38 [main] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserInfo], return: [ResponseRs(error=, timestamp=1664792738979, offset=null, perPage=null, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@219505d9, errorDescription=null)] 
2022-10-03 13:25:39 [main] INFO  o.s.t.c.t.TransactionContext - Rolled back transaction for test: [DefaultTestContext@64c63c79 testClass = UserControllerTest, testInstance = org.javaproteam27.socialnetwork.controller.UserControllerTest@78f9b1ec, testMethod = getUserInfo@UserControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@31c7528f testClass = UserControllerTest, locations = '{}', classes = '{class org.javaproteam27.socialnetwork.SocialNetworkApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@2b76ff4e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@649bec2e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@31e5415e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@793be5ca, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@57d7f8ca, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@7c6908d7], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2022-10-03 13:25:39 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:25:39 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:25:39 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:25:39 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:25:55 [main] INFO  o.j.s.service.CommentServiceTest - Starting CommentServiceTest on DESKTOP-5144I2V with PID 10284 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:25:55 [main] INFO  o.j.s.service.CommentServiceTest - The following profiles are active: prod
2022-10-03 13:25:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:25:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68ms. Found 0 JDBC repository interfaces.
2022-10-03 13:26:01 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:26:01 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:26:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:26:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:26:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:26:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:26:07 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM public.databasechangeloglock WHERE ID=1
2022-10-03 13:26:07 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:26:08 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MD5SUM FROM public.databasechangelog WHERE MD5SUM IS NOT NULL LIMIT 1
2022-10-03 13:26:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangelog
2022-10-03 13:26:09 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from public.databasechangelog
2022-10-03 13:26:09 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM public.databasechangelog ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:26:09 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:26:10 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4ba88ab5, org.springframework.security.web.context.SecurityContextPersistenceFilter@573f95b2, org.springframework.security.web.header.HeaderWriterFilter@6e56f5d4, org.springframework.web.filter.CorsFilter@3d2ec8b2, org.springframework.security.web.authentication.logout.LogoutFilter@75564689, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@498e41a4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3199c2c1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7ae736a8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@43905ade, org.springframework.security.web.session.SessionManagementFilter@79c48ad5, org.springframework.security.web.access.ExceptionTranslationFilter@64078e6a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@743a9292]
2022-10-03 13:26:11 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:26:11 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:26:11 [main] INFO  o.j.s.service.CommentServiceTest - Started CommentServiceTest in 17.502 seconds (JVM running for 20.889)
2022-10-03 13:26:11 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:26:11 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:26:11 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:26:11 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:26:26 [main] INFO  o.j.s.service.LikeServiceTest - Starting LikeServiceTest on DESKTOP-5144I2V with PID 8360 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:26:26 [main] INFO  o.j.s.service.LikeServiceTest - The following profiles are active: prod
2022-10-03 13:26:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:26:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73ms. Found 0 JDBC repository interfaces.
2022-10-03 13:26:32 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:26:32 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:26:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:26:35 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:26:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:26:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:26:37 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM public.databasechangeloglock WHERE ID=1
2022-10-03 13:26:37 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:26:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MD5SUM FROM public.databasechangelog WHERE MD5SUM IS NOT NULL LIMIT 1
2022-10-03 13:26:38 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangelog
2022-10-03 13:26:39 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from public.databasechangelog
2022-10-03 13:26:39 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM public.databasechangelog ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:26:39 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:26:40 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5af7a7, org.springframework.security.web.context.SecurityContextPersistenceFilter@380f9c1d, org.springframework.security.web.header.HeaderWriterFilter@7ab5b01a, org.springframework.web.filter.CorsFilter@685e8e17, org.springframework.security.web.authentication.logout.LogoutFilter@25a41143, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@51141f64, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4750e942, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@75044df3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@545bc8e1, org.springframework.security.web.session.SessionManagementFilter@591e27f1, org.springframework.security.web.access.ExceptionTranslationFilter@13448d2d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2e5337d8]
2022-10-03 13:26:41 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:26:41 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:26:41 [main] INFO  o.j.s.service.LikeServiceTest - Started LikeServiceTest in 16.403 seconds (JVM running for 19.764)
2022-10-03 13:26:41 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:26:41 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:26:41 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:26:41 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:27:02 [main] INFO  o.j.s.service.LoginServiceTest - Starting LoginServiceTest on DESKTOP-5144I2V with PID 8684 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:27:02 [main] INFO  o.j.s.service.LoginServiceTest - The following profiles are active: test
2022-10-03 13:27:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:27:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92ms. Found 0 JDBC repository interfaces.
2022-10-03 13:27:08 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:27:08 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:27:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:27:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:27:11 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:27:11 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:11 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:27:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:27:12 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:12 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 329ms
2022-10-03 13:27:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:13 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:13 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 22ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 10ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 45ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 21ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:27:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792831762')
2022-10-03 13:27:14 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:27:14 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@57bd0b3c, org.springframework.security.web.context.SecurityContextPersistenceFilter@274de4bc, org.springframework.security.web.header.HeaderWriterFilter@5205b2e5, org.springframework.web.filter.CorsFilter@10164e94, org.springframework.security.web.authentication.logout.LogoutFilter@6f0124b5, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3e6748ae, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@14404be2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5ca67657, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24e63b9f, org.springframework.security.web.session.SessionManagementFilter@54a332e4, org.springframework.security.web.access.ExceptionTranslationFilter@10db002c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5b115d71]
2022-10-03 13:27:15 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:27:15 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:27:15 [main] INFO  o.j.s.service.LoginServiceTest - Started LoginServiceTest in 14.458 seconds (JVM running for 16.907)
2022-10-03 13:27:16 [main] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder - Encoded password does not look like BCrypt
2022-10-03 13:27:17 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:27:17 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:27:17 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:27:17 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:27:33 [main] INFO  o.j.s.s.NotificationServiceTest - Starting NotificationServiceTest on DESKTOP-5144I2V with PID 12720 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:27:33 [main] INFO  o.j.s.s.NotificationServiceTest - The following profiles are active: test
2022-10-03 13:27:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:27:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75ms. Found 0 JDBC repository interfaces.
2022-10-03 13:27:39 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:27:40 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:27:40 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:27:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:27:43 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:27:43 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:43 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:27:43 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:43 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 362ms
2022-10-03 13:27:43 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 13ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 14ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 7ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 3ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 29ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 28ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 23ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:27:45 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:27:45 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792863197')
2022-10-03 13:27:45 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:27:46 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@39df2652, org.springframework.security.web.context.SecurityContextPersistenceFilter@2531049f, org.springframework.security.web.header.HeaderWriterFilter@3b0b20a8, org.springframework.web.filter.CorsFilter@52a9c251, org.springframework.security.web.authentication.logout.LogoutFilter@5dd47c88, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@4c176ff1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13b409bb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d461450, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5eace68f, org.springframework.security.web.session.SessionManagementFilter@23ac164d, org.springframework.security.web.access.ExceptionTranslationFilter@6d1a4522, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7d91e9c9]
2022-10-03 13:27:46 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:27:46 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:27:46 [main] INFO  o.j.s.s.NotificationServiceTest - Started NotificationServiceTest in 14.552 seconds (JVM running for 17.044)
2022-10-03 13:27:48 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:27:48 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:27:48 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:27:48 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:28:01 [main] INFO  o.j.s.service.PostServiceTest - Starting PostServiceTest on DESKTOP-5144I2V with PID 2728 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:28:01 [main] INFO  o.j.s.service.PostServiceTest - The following profiles are active: test
2022-10-03 13:28:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:28:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72ms. Found 0 JDBC repository interfaces.
2022-10-03 13:28:08 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:28:08 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:28:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:28:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:28:11 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:28:11 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:11 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:28:11 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:28:12 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:12 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 339ms
2022-10-03 13:28:12 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 32ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 38ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 25ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 64ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 20ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 50ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 21ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 15ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 6ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 29ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 9ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 99ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:14 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 29ms
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:14 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:28:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 36ms
2022-10-03 13:28:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:28:15 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:15 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 17ms
2022-10-03 13:28:15 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792891687')
2022-10-03 13:28:15 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:28:15 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1f4c7fd9, org.springframework.security.web.context.SecurityContextPersistenceFilter@7b51fc45, org.springframework.security.web.header.HeaderWriterFilter@52f2d8e8, org.springframework.web.filter.CorsFilter@62db3787, org.springframework.security.web.authentication.logout.LogoutFilter@1dde749e, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@42e202d7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@447dec7e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@411e5672, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3c6c5b44, org.springframework.security.web.session.SessionManagementFilter@fe739e7, org.springframework.security.web.access.ExceptionTranslationFilter@342cc706, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@763e1ec9]
2022-10-03 13:28:16 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:28:16 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:28:16 [main] INFO  o.j.s.service.PostServiceTest - Started PostServiceTest in 15.976 seconds (JVM running for 19.046)
2022-10-03 13:28:16 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:28:16 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:28:16 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:28:16 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:28:31 [main] INFO  o.j.s.service.StatisticServiceTest - Starting StatisticServiceTest on DESKTOP-5144I2V with PID 4752 (started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:28:31 [main] INFO  o.j.s.service.StatisticServiceTest - The following profiles are active: test
2022-10-03 13:28:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:28:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 87ms. Found 0 JDBC repository interfaces.
2022-10-03 13:28:37 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:28:38 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:28:38 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:28:39 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2022-10-03 13:28:41 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:28:41 [main] INFO  l.c.StandardChangeLogHistoryService - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:41 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:28:41 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM PUBLIC.DATABASECHANGELOGLOCK
2022-10-03 13:28:42 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE person (
                        id SERIAL PRIMARY KEY,
                        first_name VARCHAR (255) NOT NULL,
                        last_name VARCHAR (255) NOT NULL,
                        reg_date TIMESTAMP NOT NULL,
                        birth_date TIMESTAMP,
                        email VARCHAR (255) UNIQUE NOT NULL,
                        phone VARCHAR(255) UNIQUE,
                        password VARCHAR(255) NOT NULL,
                        photo VARCHAR(255),
                        about VARCHAR (255),
                        city VARCHAR (255),
                        country VARCHAR (255),
                        confirmation_code INT,
                        is_approved BOOLEAN DEFAULT FALSE NOT NULL,
                        messages_permission VARCHAR (255),
                        last_online_time TIMESTAMP,
                        is_blocked BOOLEAN DEFAULT FALSE
);
2022-10-03 13:28:42 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:42 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/001-create-person.sql::raw::includeAll ran successfully in 446ms
2022-10-03 13:28:42 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/001-create-person.sql', NOW(), 1, '8:3344edd928e2a3b94226bee86849c8e6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post (
                      id SERIAL PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      author_id INT,
                      title VARCHAR (255),
                      post_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                      CONSTRAINT fk_person_post
                            FOREIGN KEY (author_id)
                                REFERENCES person (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/002-create-post.sql::raw::includeAll ran successfully in 19ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/002-create-post.sql', NOW(), 2, '8:2e31f03646f1252beb8e3de88971b020', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_comment (
                      id serial PRIMARY KEY,
                      time TIMESTAMP NOT NULL,
                      post_id INT,
                      parent_id INT,
                      author_id INT,
                      comment_text TEXT,
                      is_blocked BOOLEAN DEFAULT FALSE,
                      is_deleted BOOLEAN DEFAULT FALSE,
                        CONSTRAINT fk_comment_parent
                            FOREIGN KEY (parent_id)
                                REFERENCES post_comment (id),
                        CONSTRAINT fk_comment_person
                            FOREIGN KEY (author_id)
                                REFERENCES person (id),
                        CONSTRAINT fk_comment_post
                            FOREIGN KEY (post_id)
                                REFERENCES post (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/003-create-post-comment.sql::raw::includeAll ran successfully in 31ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/003-create-post-comment.sql', NOW(), 3, '8:694eabf684e5bbf4fcb886b789af5771', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_like (
                           id serial PRIMARY KEY,
                           time TIMESTAMP NOT NULL,
                           person_id INT,
                           post_id INT,
                           type VARCHAR (255),
                           CONSTRAINT fk_person_like
                                FOREIGN KEY (person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/004-create-post-like.sql::raw::includeAll ran successfully in 19ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/004-create-post-like.sql', NOW(), 4, '8:63fa7356663d06ea4f68812948ab5dee', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post_file (
                           id serial PRIMARY KEY,
                           post_id INT,
                           name VARCHAR (255),
                           path VARCHAR (255),
                           CONSTRAINT fk_file_post
                                FOREIGN KEY (post_id)
                                    REFERENCES post (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/005-create-post-file.sql::raw::includeAll ran successfully in 74ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/005-create-post-file.sql', NOW(), 5, '8:edc3764f1a66da59686e3c8691bd2b1d', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE tag (
                     id serial PRIMARY KEY,
                     tag VARCHAR (255)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/006-create-tag.sql::raw::includeAll ran successfully in 8ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/006-create-tag.sql', NOW(), 6, '8:222ae51bcf8e1ed784c85f698182a70c', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE post2tag (
                          id serial PRIMARY KEY,
                          tag_id INT,
                          post_id INT,
                                CONSTRAINT fk_tag
                                    FOREIGN KEY (tag_id)
                                        REFERENCES tag (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/007-create-post2tag.sql::raw::includeAll ran successfully in 31ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/007-create-post2tag.sql', NOW(), 7, '8:d82ea7e5cc0ad1c4f9632f3ba7af0ee6', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE block_history (
                               id serial PRIMARY KEY,
                               time TIMESTAMP NOT NULL,
                               person_id INT,
                               post_id INT,
                               comment_id INT,
                               action VARCHAR (255),
                               CONSTRAINT fk_block_person
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id),
                               CONSTRAINT fk_block_post
                                    FOREIGN KEY (post_id)
                                        REFERENCES post (id),
                               CONSTRAINT fk_block_comment
                                    FOREIGN KEY (comment_id)
                                        REFERENCES post_comment (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/008-create-block-history.sql::raw::includeAll ran successfully in 59ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/008-create-block-history.sql', NOW(), 8, '8:5b7f3ab9e19a135104d95fe2f1d21314', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE message (
                         id serial PRIMARY KEY,
                         time TIMESTAMP NOT NULL,
                         author_id INT,
                         recipient_id INT,
                         message_text TEXT,
                         read_status VARCHAR (255),
                         CONSTRAINT fk_message_author
                                FOREIGN KEY (author_id)
                                    REFERENCES person (id),
                         CONSTRAINT fk_message_recipient
                                FOREIGN KEY (recipient_id)
                                    REFERENCES person (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/009-create-message.sql::raw::includeAll ran successfully in 63ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/009-create-message.sql', NOW(), 9, '8:8c0bc5ef8b805672b0dd7dda093b8bce', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE notification (
                              id serial PRIMARY KEY,
                              notification_type VARCHAR (255),
                              sent_time TIMESTAMP NOT NULL,
                              person_id INT,
                              entity_id INT,
                              contact VARCHAR (255),
                              is_read BOOLEAN DEFAULT FALSE,
                              CONSTRAINT fk_person_notification
                                    FOREIGN KEY (person_id)
                                        REFERENCES person (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/010-create-notification.sql::raw::includeAll ran successfully in 23ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/010-create-notification.sql', NOW(), 10, '8:c5bd50cd8a751a64f8a910e9ab4f6282', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship_status (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   name VARCHAR (255),
                                   code VARCHAR (255)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/011-create-friendship-status.sql::raw::includeAll ran successfully in 4ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/011-create-friendship-status.sql', NOW(), 11, '8:ff5787c37005ebf4cf4aba612f9a480b', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE friendship (
                            id serial PRIMARY KEY,
                            status_id INT,
                            sent_time TIMESTAMP NOT NULL,
                            src_person_id INT,
                            dst_person_id INT,
                            CONSTRAINT fk_friendship
                                FOREIGN KEY (status_id)
                                    REFERENCES friendship_status (id),
                            CONSTRAINT fk_sender_person
                                FOREIGN KEY (src_person_id)
                                    REFERENCES person (id),
                            CONSTRAINT fk_recipient_person
                                FOREIGN KEY (dst_person_id)
                                    REFERENCES person (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/012-create-friendship.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/012-create-friendship.sql', NOW(), 12, '8:678a9aff4585a850fe65e6830038e4db', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE "user" (
                      id serial PRIMARY KEY,
                      name VARCHAR (255) NOT NULL,
                      e_mail VARCHAR (255),
                      password VARCHAR (255) NOT NULL,
                      type VARCHAR (255) NOT NULL
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/013-create-user.sql::raw::includeAll ran successfully in 0ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/013-create-user.sql', NOW(), 13, '8:346a89a13410da301b5097d7762fb1c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE city (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL,
                      country_id INT
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/014-create-city.sql::raw::includeAll ran successfully in 12ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/014-create-city.sql', NOW(), 14, '8:48226efc224da326e2ae33e05b0c7117', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE country (
                      id serial PRIMARY KEY,
                      title VARCHAR (255) NOT NULL
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/015-create-country.sql::raw::includeAll ran successfully in 5ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/015-create-country.sql', NOW(), 15, '8:669a9e2f3e66755fbbb86be41bec15c1', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE captcha (
                                   id serial PRIMARY KEY,
                                   time TIMESTAMP NOT NULL,
                                   code VARCHAR (255) NOT NULL,
                                   secret_code VARCHAR (255) NOT NULL
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/016-create-captcha.sql::raw::includeAll ran successfully in 16ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/016-create-captcha.sql', NOW(), 16, '8:6c599d64a1ae8523bd6c322f9085d11a', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE person ALTER COLUMN photo TYPE text;
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/017-edit-person.sql::raw::includeAll ran successfully in 47ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/017-edit-person.sql', NOW(), 17, '8:54f6d5354646f35e66fb52331e60bd23', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - CREATE TABLE dialog (
                      id serial PRIMARY KEY,
                      first_person_id INT NOT NULL,
                      second_person_id INT,
                      last_message_id INT,
                      last_active_time TIMESTAMP NOT NULL,
                      CONSTRAINT fk_dialog_first_person
                          FOREIGN KEY (first_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_second_person
                          FOREIGN KEY (second_person_id)
                              REFERENCES person (id),
                      CONSTRAINT fk_dialog_last_message
                          FOREIGN KEY (last_message_id)
                              REFERENCES message (id)
);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/018-create-dialog.sql::raw::includeAll ran successfully in 24ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/018-create-dialog.sql', NOW(), 18, '8:fedd10ecad3ce2e0d3cc464798811075', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN dialog_id INT NOT NULL;

ALTER TABLE IF EXISTS message ADD CONSTRAINT fk_message_dialog FOREIGN KEY (dialog_id) REFERENCES dialog (id);
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/019-edit-message.sql::raw::includeAll ran successfully in 23ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/019-edit-message.sql', NOW(), 19, '8:efc782040f51387c248126e641507586', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - ALTER TABLE IF EXISTS message ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - Custom SQL executed
2022-10-03 13:28:44 [main] INFO  liquibase.changelog.ChangeSet - ChangeSet /db/changelog/migrations/020-edit-message.sql::raw::includeAll ran successfully in 11ms
2022-10-03 13:28:44 [main] INFO  liquibase.executor.jvm.JdbcExecutor - INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('raw', 'includeAll', '/db/changelog/migrations/020-edit-message.sql', NOW(), 20, '8:64ed2acffa8fed3225a0f73f22ddd73f', 'sql', '', 'EXECUTED', NULL, NULL, '3.8.9', '4792921901')
2022-10-03 13:28:44 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:28:45 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@31eb5ed6, org.springframework.security.web.context.SecurityContextPersistenceFilter@451e8bd0, org.springframework.security.web.header.HeaderWriterFilter@1db4ea47, org.springframework.web.filter.CorsFilter@e30573c, org.springframework.security.web.authentication.logout.LogoutFilter@74a121fe, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@6af78a48, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4a9a0d9d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3ae648d2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c70da80, org.springframework.security.web.session.SessionManagementFilter@2b991034, org.springframework.security.web.access.ExceptionTranslationFilter@3ad9f06a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@50061d56]
2022-10-03 13:28:46 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:28:46 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:28:46 [main] INFO  o.j.s.service.StatisticServiceTest - Started StatisticServiceTest in 16.143 seconds (JVM running for 18.808)
2022-10-03 13:28:47 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:28:47 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:28:47 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:28:47 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:29:13 [main] INFO  o.j.s.SocialNetworkApplication - Starting SocialNetworkApplication on DESKTOP-5144I2V with PID 12552 (C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend\target\classes started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:29:13 [main] INFO  o.j.s.SocialNetworkApplication - The following profiles are active: prod
2022-10-03 13:29:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:29:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69ms. Found 0 JDBC repository interfaces.
2022-10-03 13:29:17 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2022-10-03 13:29:17 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8086"]
2022-10-03 13:29:17 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2022-10-03 13:29:17 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-10-03 13:29:17 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-10-03 13:29:17 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4204 ms
2022-10-03 13:29:19 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:29:20 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:29:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:29:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:29:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:29:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:29:24 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM public.databasechangeloglock WHERE ID=1
2022-10-03 13:29:25 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:29:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MD5SUM FROM public.databasechangelog WHERE MD5SUM IS NOT NULL LIMIT 1
2022-10-03 13:29:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangelog
2022-10-03 13:29:27 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from public.databasechangelog
2022-10-03 13:29:27 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM public.databasechangelog ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:29:28 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:29:28 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7b9e7633, org.springframework.security.web.context.SecurityContextPersistenceFilter@42c3b02e, org.springframework.security.web.header.HeaderWriterFilter@537e52de, org.springframework.web.filter.CorsFilter@1fbd0850, org.springframework.security.web.authentication.logout.LogoutFilter@80347b2, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@1a2773a8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5e81b406, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@53741683, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57bc7f67, org.springframework.security.web.session.SessionManagementFilter@31048b3d, org.springframework.security.web.access.ExceptionTranslationFilter@65a03c19, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@63236968]
2022-10-03 13:29:29 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:29:29 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:29:29 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8086"]
2022-10-03 13:29:29 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2022-10-03 13:29:29 [main] INFO  o.j.s.SocialNetworkApplication - Started SocialNetworkApplication in 17.553 seconds (JVM running for 18.564)
2022-10-03 13:29:48 [http-nio-8086-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-03 13:29:48 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-10-03 13:29:48 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 20 ms
2022-10-03 13:29:48 [http-nio-8086-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:48 [http-nio-8086-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:48 [http-nio-8086-exec-2] ERROR o.a.c.c.C.[Tomcat].[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:56 [http-nio-8086-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:56 [http-nio-8086-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:56 [http-nio-8086-exec-4] ERROR o.a.c.c.C.[Tomcat].[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:56 [http-nio-8086-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:56 [http-nio-8086-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:56 [http-nio-8086-exec-6] ERROR o.a.c.c.C.[Tomcat].[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:57 [http-nio-8086-exec-8] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:97)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:57 [http-nio-8086-exec-8] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:29:57 [http-nio-8086-exec-8] ERROR o.a.c.c.C.[Tomcat].[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]
org.javaproteam27.socialnetwork.security.jwt.JwtAuthenticationException: JWT token is expired or invalid
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenProvider.validateToken(JwtTokenProvider.java:79)
	at org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter.doFilter(JwtTokenFilter.java:27)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:710)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:384)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:398)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:257)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:352)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-03 13:30:01 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:30:01 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:30:01 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:30:01 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2022-10-03 13:30:08 [main] INFO  o.j.s.SocialNetworkApplication - Starting SocialNetworkApplication on DESKTOP-5144I2V with PID 6996 (C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend\target\classes started by Mikhail in C:\Users\Mikhail\Desktop\commandProject\javapro_teams27_backend)
2022-10-03 13:30:08 [main] INFO  o.j.s.SocialNetworkApplication - The following profiles are active: prod
2022-10-03 13:30:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2022-10-03 13:30:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 173ms. Found 0 JDBC repository interfaces.
2022-10-03 13:30:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2022-10-03 13:30:13 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8086"]
2022-10-03 13:30:13 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2022-10-03 13:30:13 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
2022-10-03 13:30:13 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-10-03 13:30:13 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4936 ms
2022-10-03 13:30:15 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2022-10-03 13:30:15 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2022-10-03 13:30:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2022-10-03 13:30:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2022-10-03 13:30:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:30:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangeloglock
2022-10-03 13:30:20 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT LOCKED FROM public.databasechangeloglock WHERE ID=1
2022-10-03 13:30:20 [main] INFO  l.lockservice.StandardLockService - Successfully acquired change log lock
2022-10-03 13:30:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT MD5SUM FROM public.databasechangelog WHERE MD5SUM IS NOT NULL LIMIT 1
2022-10-03 13:30:21 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT COUNT(*) FROM public.databasechangelog
2022-10-03 13:30:22 [main] INFO  l.c.StandardChangeLogHistoryService - Reading from public.databasechangelog
2022-10-03 13:30:22 [main] INFO  liquibase.executor.jvm.JdbcExecutor - SELECT * FROM public.databasechangelog ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2022-10-03 13:30:22 [main] INFO  l.lockservice.StandardLockService - Successfully released change log lock
2022-10-03 13:30:22 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4ce4c097, org.springframework.security.web.context.SecurityContextPersistenceFilter@c105912, org.springframework.security.web.header.HeaderWriterFilter@19740583, org.springframework.web.filter.CorsFilter@2aec09a3, org.springframework.security.web.authentication.logout.LogoutFilter@50cb64d5, org.javaproteam27.socialnetwork.security.jwt.JwtTokenFilter@3a109ff7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@f3ae18f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f1dadeb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@79864d6, org.springframework.security.web.session.SessionManagementFilter@1277a6a1, org.springframework.security.web.access.ExceptionTranslationFilter@53ec379a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@46a5aff]
2022-10-03 13:30:23 [main] INFO  o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2022-10-03 13:30:23 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2022-10-03 13:30:23 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8086"]
2022-10-03 13:30:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2022-10-03 13:30:23 [main] INFO  o.j.s.SocialNetworkApplication - Started SocialNetworkApplication in 16.555 seconds (JVM running for 17.813)
2022-10-03 13:30:44 [http-nio-8086-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-03 13:30:44 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2022-10-03 13:30:44 [http-nio-8086-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 29 ms
2022-10-03 13:30:50 [http-nio-8086-exec-4] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], arguments: [LoginRq(email=pks52@mail.ru, password=12345678)] 
2022-10-03 13:30:53 [http-nio-8086-exec-4] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.LoginController], method: [login], return: [ResponseRs(error=, timestamp=1664793053905, offset=null, perPage=null, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@4442b145, errorDescription=null)] 
2022-10-03 13:30:54 [http-nio-8086-exec-6] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJwa3M1MkBtYWlsLnJ1IiwiaWF0IjoxNjY0NzkzMDUxLCJleHAiOjE2NjQ3OTY2NTF9.s2RK3gYYwChaTpFEYkgfq4380_Sd-KEkV0u4_sVoLXQ] 
2022-10-03 13:30:55 [http-nio-8086-exec-6] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664793055033, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@7471e46a, errorDescription=null)] 
2022-10-03 13:30:59 [http-nio-8086-exec-1] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], arguments: [108, 0, 20] 
2022-10-03 13:30:59 [http-nio-8086-exec-1] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], return: [ListResponseRs(error=, timestamp=1664793059426, total=0, offset=0, perPage=20, data=[], errorDescription=null)] 
2022-10-03 13:31:05 [http-nio-8086-exec-10] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], arguments: [108, 0, 20] 
2022-10-03 13:31:05 [http-nio-8086-exec-10] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [getUserPosts], return: [ListResponseRs(error=, timestamp=1664793065967, total=0, offset=0, perPage=20, data=[], errorDescription=null)] 
2022-10-03 13:31:14 [http-nio-8086-exec-8] INFO  o.j.socialnetwork.aop.LoggerAspect - Request = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], arguments: [eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJwa3M1MkBtYWlsLnJ1IiwiaWF0IjoxNjY0NzkzMDUxLCJleHAiOjE2NjQ3OTY2NTF9.s2RK3gYYwChaTpFEYkgfq4380_Sd-KEkV0u4_sVoLXQ] 
2022-10-03 13:31:15 [http-nio-8086-exec-8] INFO  o.j.socialnetwork.aop.LoggerAspect - Response = path: [org.javaproteam27.socialnetwork.controller.UserController], method: [profileResponse], return: [ResponseRs(error=string, timestamp=1664793075694, offset=0, perPage=20, data=org.javaproteam27.socialnetwork.model.dto.response.PersonRs@43983b25, errorDescription=null)] 
2022-10-03 13:31:30 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2022-10-03 13:31:30 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2022-10-03 13:31:30 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2022-10-03 13:31:30 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
